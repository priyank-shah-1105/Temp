"use strict";function controllerProviderDecorator(t,e){var n=t.register;t.register=function(t,r){return e.register(t,r),n.apply(this,arguments)}}function $controllerIntrospectorProvider(){var t=[],e=null;return{register:function(n,r){angular.isArray(r)&&(r=r[r.length-1]),r.$routeConfig&&(e?e(n,r.$routeConfig):t.push({name:n,config:r.$routeConfig}))},$get:["$componentLoader",function(n){return function(r){for(e=function(t,e){return t=n.component(t),r(t,e)};t.length>0;){var i=t.pop();e(i.name,i.config)}}}]}}function routerFactory(t,e,n,r,i){i(function(t,e){r.config(t,e)}),e.$watch(function(){return n.path()},function(e){t.navigate(e)});var o=t.navigate;return t.navigate=function(t){return o.call(this,t).then(function(t){t&&n.path(t)})},t}function ngViewportDirective(t,e,n,r){function i(t,n,r){return e.invoke(t,n,r.locals)}function o(e,r,o,u,s){function l(){m&&(t.cancel(m),m=null),p&&(p.$destroy(),p=null),g&&(m=t.leave(g),m.then(function(){m=null}),g=null)}var p,h,f,g,m,v,d=o.ngViewport||"default",y=u[0],w=u[1],b=y&&y.$$router||c;b.registerViewport({canDeactivate:function(t){return!f||!f.canDeactivate||i(f.canDeactivate,f,t)},activate:function(o){var c=a(o);if(c!==v){o.locals.$scope=h=e.$new(),w.$$router=o.router,w.$$template=o.template;var u=o.component,m=s(h,function(e){t.enter(e,null,g||r),l()}),d=o.controller;h[u]=d;var y;if(f&&f.deactivate&&(y=n.when(i(f.deactivate,f,o))),f=d,g=m,p=h,v=c,d.activate){var b=n.when(i(d.activate,d,o));return y?y.then(b):b}return y}}},d)}function a(t){return JSON.stringify({path:t.path,component:t.component,params:Object.keys(t.params).reduce(function(e,n){return"childRoute"!==n&&(e[n]=t.params[n]),e},{})})}var c=r;return{restrict:"AE",transclude:"element",terminal:!0,priority:400,require:["?^^ngViewport","ngViewport"],link:o,controller:function(){},controllerAs:"$$ngViewport"}}function ngViewportFillContentDirective(t){return{restrict:"EA",priority:-400,require:"ngViewport",link:function(e,n,r,i){var o=i.$$template;n.html(o);var a=t(n.contents());a(e)}}}function makeComponentString(t){return['<router-component component-name="',t,'">',"</router-component>"].join("")}function ngLinkDirective(t,e,n){function r(t,e,r,o){var a=o&&o.$$router||i;if(a){var c,u=r.ngLink||"",s=u.match(LINK_MICROSYNTAX_RE),l=s[1],p=s[2];if(p){var h=n(p);if(h.constant){var f=h();c="."+a.generate(l,f),e.attr("href",c)}else t.$watch(function(){return h(t)},function(t){c="."+a.generate(l,t),e.attr("href",c)},!0)}else c="."+a.generate(l),e.attr("href",c)}}var i=t;return{require:"?^^ngViewport",restrict:"A",link:r}}function anchorLinkDirective(t){return{restrict:"E",link:function(e,n){if("a"===n[0].nodeName.toLowerCase()){var r="[object SVGAnimatedString]"===Object.prototype.toString.call(n.prop("href"))?"xlink:href":"href";n.on("click",function(e){var i=n.attr(r);i||e.preventDefault(),t.recognize(i)&&(t.navigate(i),e.preventDefault())})}}}}function setupRoutersStepFactory(){return function(t){return t.router.makeDescendantRouters(t)}}function initLocalsStepFactory(){return function(t){return t.router.traverseInstruction(t,function(t){return t.locals={$router:t.router,$routeParams:t.params||{}}})}}function initControllersStepFactory(t,e){return function(n){return n.router.traverseInstruction(n,function(n){var r,i=e.controllerName(n.component),o=n.locals;try{r=t(i,o)}catch(a){console.warn&&console.warn("Could not instantiate controller",i),r=t(angular.noop,o)}return n.controller=r})}}function runCanDeactivateHookStepFactory(){return function(t){return t.router.canDeactivatePorts(t)}}function runCanActivateHookStepFactory(t){function e(e,n,r){return t.invoke(e,n,{$routeParams:r.params})}return function(t){return t.router.traverseInstruction(t,function(t){var n=t.controller;return!n.canActivate||e(n.canActivate,n,t)})}}function loadTemplatesStepFactory(t,e){return function(n){return n.router.traverseInstruction(n,function(n){var r=t.template(n.component);return e(r).then(function(t){return n.template=t})})}}function activateStepValue(t){return t.router.activatePorts(t)}function pipelineProvider(){var t,e=["$setupRoutersStep","$initLocalsStep","$initControllersStep","$runCanDeactivateHookStep","$runCanActivateHookStep","$loadTemplatesStep","$activateStep"];return{steps:e.slice(0),config:function(t){e=t},$get:["$injector","$q",function(n,r){return t=e.map(function(t){return n.get(t)}),{process:function(e){function n(t){if(0===i.length)return t;var o=i.shift();return r.when(o(e)).then(n)}var i=t.slice(0);return n()}}}]}}function $componentLoaderProvider(){var t="Controller",e=function(e){return e[0].toUpperCase()+e.substr(1)+t},n=function(t){var e=dashCase(t);return"./components/"+e+"/"+e+".html"},r=function(e){return e[0].toLowerCase()+e.substr(1,e.length-t.length-1)};return{$get:function(){return{controllerName:e,template:n,component:r}},setCtrlNameMapping:function(t){return e=t,this},setComponentFromCtrlMapping:function(t){return r=t,this},setTemplateMapping:function(t){return n=t,this}}}function privatePipelineFactory(t){return t}function dashCase(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}angular.module("ngNewRouter",[]).factory("$router",routerFactory).value("$routeParams",{}).provider("$componentLoader",$componentLoaderProvider).provider("$pipeline",pipelineProvider).factory("$$pipeline",privatePipelineFactory).factory("$setupRoutersStep",setupRoutersStepFactory).factory("$initLocalsStep",initLocalsStepFactory).factory("$initControllersStep",initControllersStepFactory).factory("$runCanDeactivateHookStep",runCanDeactivateHookStepFactory).factory("$runCanActivateHookStep",runCanActivateHookStepFactory).factory("$loadTemplatesStep",loadTemplatesStepFactory).value("$activateStep",activateStepValue).directive("ngViewport",ngViewportDirective).directive("ngViewport",ngViewportFillContentDirective).directive("ngLink",ngLinkDirective).directive("a",anchorLinkDirective),angular.module("ng").provider("$controllerIntrospector",$controllerIntrospectorProvider).config(controllerProviderDecorator),controllerProviderDecorator.$inject=["$controllerProvider","$controllerIntrospectorProvider"],routerFactory.$inject=["$$rootRouter","$rootScope","$location","$$grammar","$controllerIntrospector"],ngViewportDirective.$inject=["$animate","$injector","$q","$router"],ngViewportFillContentDirective.$inject=["$compile"];var LINK_MICROSYNTAX_RE=/^(.+?)(?:\((.*)\))?$/;ngLinkDirective.$inject=["$router","$location","$parse"],anchorLinkDirective.$inject=["$router"],initControllersStepFactory.$inject=["$controller","$componentLoader"],runCanActivateHookStepFactory.$inject=["$injector"],loadTemplatesStepFactory.$inject=["$componentLoader","$templateRequest"],privatePipelineFactory.$inject=["$pipeline"],angular.module("ngNewRouter").factory("$$rootRouter",["$q","$$grammar","$$pipeline",function(t,e,n){function r(t,e,n,r){return f(e,"constructor",{value:t,configurable:!0,enumerable:!1,writable:!0}),arguments.length>3?("function"==typeof r&&(t.__proto__=r),t.prototype=m(i(r),o(e))):t.prototype=e,f(t,"prototype",{configurable:!1,writable:!1}),g(t,o(n))}function i(t){if("function"==typeof t){var e=t.prototype;if(Object(e)===e||null===e)return t.prototype;throw new TypeError("super prototype must be an Object or null")}if(null===t)return null;throw new TypeError("Super expression must either be null or a function, not "+typeof t+".")}function o(t){for(var e={},n=d(t),r=0;r<n.length;r++){var i=n[r];e[i]=v(t,i)}return e}function a(t,e){var n=y(t);do{var r=v(n,e);if(r)return r;n=y(n)}while(n)}function c(t,e,n,r){return u(t,e,n).apply(t,r)}function u(t,e,n){var r=a(e,n);return r?r.get?r.get.call(t):r.value:void 0}function s(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function l(e,n){return t.all(p(e,n))}function p(t,e){var n=[];return Object.keys(t).forEach(function(r){return n.push(e(t[r],r))}),n}function h(e){return e?t.when(e):t.reject()}var f=Object.defineProperty,g=Object.defineProperties,m=Object.create,v=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,y=Object.getPrototypeOf,w=function(t,e,n,r){this.name=r,this.parent=n||null,this.navigating=!1,this.ports={},this.children={},this.registry=t,this.pipeline=e};r(w,{childRouter:function(){var t=void 0!==arguments[0]?arguments[0]:"default";return this.children[t]||(this.children[t]=new $(this,t)),this.children[t]},registerViewport:function(t){var e=void 0!==arguments[1]?arguments[1]:"default";return this.ports[e]=t,this.renavigate()},config:function(t){return this.registry.config(this.name,t),this.renavigate()},navigate:function(e){var n=this;if(this.navigating)return t.when();this.lastNavigationAttempt=e;var r=this.recognize(e);return r?(this._startNavigating(),r.router=this,this.pipeline.process(r).then(function(){return n._finishNavigating()},function(){return n._finishNavigating()}).then(function(){return r.canonicalUrl})):t.reject()},_startNavigating:function(){this.navigating=!0},_finishNavigating:function(){this.navigating=!1},makeDescendantRouters:function(t){this.traverseInstructionSync(t,function(t,e){e.router=t.router.childRouter(e.component)})},traverseInstructionSync:function(t,e){var n=this;s(t.viewports,function(n){return e(t,n)}),s(t.viewports,function(t){return n.traverseInstructionSync(t,e)})},traverseInstruction:function(e,n){return e?l(e.viewports,function(t,e){return h(n(t,e))}).then(function(){return l(e.viewports,function(t){return t.router.traverseInstruction(t,n)})}):t.when()},activatePorts:function(t){return this.queryViewports(function(e,n){return e.activate(t.viewports[n])}).then(function(){return l(t.viewports,function(t){return t.router.activatePorts(t)})})},canDeactivatePorts:function(t){return this.traversePorts(function(e,n){return h(e.canDeactivate(t.viewports[n]))})},traversePorts:function(t){var e=this;return this.queryViewports(t).then(function(){return l(e.children,function(e){return e.traversePorts(t)})})},queryViewports:function(t){return l(this.ports,t)},recognize:function(t){return this.registry.recognize(t)},renavigate:function(){var e=this.previousUrl||this.lastNavigationAttempt;return!this.navigating&&e?this.navigate(e):t.when()},generate:function(t,e){return this.registry.generate(t,e)}},{}),Object.defineProperty(w,"parameters",{get:function(){return[[Grammar],[Pipeline],[],[]]}}),Object.defineProperty(w.prototype.generate,"parameters",{get:function(){return[[$traceurRuntime.type.string],[]]}});var b=function(t,e){c(this,P.prototype,"constructor",[t,e,null,"/"])},P=b;r(b,{},{},w),Object.defineProperty(b,"parameters",{get:function(){return[[Grammar],[Pipeline]]}});var $=function(t,e){c(this,_.prototype,"constructor",[t.registry,t.pipeline,t,e]),this.parent=t},_=$;return r($,{},{},w),new b(e,n)}]),angular.module("ngNewRouter").factory("$$grammar",["$q",function(){function t(t,r,i,o){return a(r,"constructor",{value:t,configurable:!0,enumerable:!1,writable:!0}),arguments.length>3?("function"==typeof o&&(t.__proto__=o),t.prototype=u(e(o),n(r))):t.prototype=r,a(t,"prototype",{configurable:!1,writable:!1}),c(t,n(i))}function e(t){if("function"==typeof t){var e=t.prototype;if(Object(e)===e||null===e)return t.prototype;throw new TypeError("super prototype must be an Object or null")}if(null===t)return null;throw new TypeError("Super expression must either be null or a function, not "+typeof t+".")}function n(t){for(var e={},n=l(t),r=0;r<n.length;r++){var i=n[r];e[i]=s(t,i)}return e}function r(t){return JSON.parse(JSON.stringify(t))}function i(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function o(t,e){var n=[];return Object.keys(t).forEach(function(r){return n.push(e(t[r],r))}),n}var a=Object.defineProperty,c=Object.defineProperties,u=Object.create,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,p=(Object.getPrototypeOf,function(){function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(t){this.string=t}function n(t){this.name=t}function r(t){this.name=t}function i(){}function o(t,o,a){"/"===t.charAt(0)&&(t=t.substr(1));for(var c=t.split("/"),u=[],s=0,l=c.length;l>s;s++){var p,h=c[s];(p=h.match(/^:([^\/]+)$/))?(u.push(new n(p[1])),o.push(p[1]),a.dynamics++):(p=h.match(/^\*([^\/]+)$/))?(u.push(new r(p[1])),o.push(p[1]),a.stars++):""===h?u.push(new i):(u.push(new e(h)),a.statics++)}return u}function a(t){this.charSpec=t,this.nextStates=[]}function c(t){return t.sort(function(t,e){if(t.types.stars!==e.types.stars)return t.types.stars-e.types.stars;if(t.types.stars){if(t.types.statics!==e.types.statics)return e.types.statics-t.types.statics;if(t.types.dynamics!==e.types.dynamics)return e.types.dynamics-t.types.dynamics}return t.types.dynamics!==e.types.dynamics?t.types.dynamics-e.types.dynamics:t.types.statics!==e.types.statics?e.types.statics-t.types.statics:0})}function u(t,e){for(var n=[],r=0,i=t.length;i>r;r++){var o=t[r];n=n.concat(o.match(e))}return n}function s(t){this.queryParams=t||{}}function l(t,e,n){for(var r=t.handlers,i=t.regex,o=e.match(i),a=1,c=new s(n),u=0,l=r.length;l>u;u++){for(var p=r[u],h=p.names,f={},g=0,m=h.length;m>g;g++)f[h[g]]=o[a++];c.push({handler:p.handler,params:f,isDynamic:!!h.length})}return c}function p(t,e){return e.eachChar(function(e){t=t.put(e)}),t}var h=function(){function t(t,e,n){this.path=t,this.matcher=e,this.delegate=n}function e(t){this.routes={},this.children={},this.target=t}function n(e,r,i){return function(o,a){var c=e+o;return a?void a(n(c,r,i)):new t(e+o,r,i)}}function r(t,e,n){for(var r=0,i=0,o=t.length;o>i;i++)r+=t[i].path.length;e=e.substr(r);var a={path:e,handler:n};t.push(a)}function i(t,e,n,o){var a=e.routes;for(var c in a)if(a.hasOwnProperty(c)){var u=t.slice();r(u,c,a[c]),e.children[c]?i(u,e.children[c],n,o):n.call(o,u)}}return t.prototype={to:function(t,e){var n=this.delegate;if(n&&n.willAddRoute&&(t=n.willAddRoute(this.matcher.target,t)),this.matcher.add(this.path,t),e){if(0===e.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,t,e,this.delegate)}return this}},e.prototype={add:function(t,e){this.routes[t]=e},addChild:function(t,r,i,o){var a=new e(r);this.children[t]=a;var c=n(t,a,o);o&&o.contextEntered&&o.contextEntered(r,c),i(c)}},function(t,r){var o=new e;t(n("",o,this.delegate)),i([],o,function(t){r?r(this,t):this.add(t)},this)}}(),f=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],g=new RegExp("(\\"+f.join("|\\")+")","g");e.prototype={eachChar:function(t){for(var e,n=this.string,r=0,i=n.length;i>r;r++)e=n.charAt(r),t({validChars:e})},regex:function(){return this.string.replace(g,"\\$1")},generate:function(){return this.string}},n.prototype={eachChar:function(t){t({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(t){return t[this.name]}},r.prototype={eachChar:function(t){t({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(t){return t[this.name]}},i.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},a.prototype={get:function(t){for(var e=this.nextStates,n=0,r=e.length;r>n;n++){var i=e[n],o=i.charSpec.validChars===t.validChars;if(o=o&&i.charSpec.invalidChars===t.invalidChars)return i}},put:function(t){var e;return(e=this.get(t))?e:(e=new a(t),this.nextStates.push(e),t.repeat&&e.nextStates.push(e),e)},match:function(t){for(var e,n,r,i=this.nextStates,o=[],a=0,c=i.length;c>a;a++)e=i[a],n=e.charSpec,"undefined"!=typeof(r=n.validChars)?-1!==r.indexOf(t)&&o.push(e):"undefined"!=typeof(r=n.invalidChars)&&-1===r.indexOf(t)&&o.push(e);return o}};var m=Object.create||function(t){function e(){}return e.prototype=t,new e};s.prototype=m({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var v=function(){this.rootState=new a,this.names={}};return v.prototype={add:function(t,e){for(var n,r=this.rootState,a="^",c={statics:0,dynamics:0,stars:0},u=[],s=[],l=!0,h=0,f=t.length;f>h;h++){var g=t[h],m=[],v=o(g.path,m,c);s=s.concat(v);for(var d=0,y=v.length;y>d;d++){var w=v[d];w instanceof i||(l=!1,r=r.put({validChars:"/"}),a+="/",r=p(r,w),a+=w.regex())}var b={handler:g.handler,names:m};u.push(b)}l&&(r=r.put({validChars:"/"}),a+="/"),r.handlers=u,r.regex=new RegExp(a+"$"),r.types=c,(n=e&&e.as)&&(this.names[n]={segments:s,handlers:u})},handlersFor:function(t){var e=this.names[t],n=[];if(!e)throw new Error("There is no route named "+t);for(var r=0,i=e.handlers.length;i>r;r++)n.push(e.handlers[r]);return n},hasRoute:function(t){return!!this.names[t]},generate:function(t,e){var n=this.names[t],r="";if(!n)throw new Error("There is no route named "+t);for(var o=n.segments,a=0,c=o.length;c>a;a++){var u=o[a];u instanceof i||(r+="/",r+=u.generate(e))}return"/"!==r.charAt(0)&&(r="/"+r),e&&e.queryParams&&(r+=this.generateQueryString(e.queryParams,n.handlers)),r},generateQueryString:function(e){var n=[],r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(i);r.sort();for(var o=0,a=r.length;a>o;o++){i=r[o];var c=e[i];if(null!=c){var u=encodeURIComponent(i);if(t(c))for(var s=0,l=c.length;l>s;s++){var p=i+"[]="+encodeURIComponent(c[s]);n.push(p)}else u+="="+encodeURIComponent(c),n.push(u)}}return 0===n.length?"":"?"+n.join("&")},parseQueryString:function(t){for(var e=t.split("&"),n={},r=0;r<e.length;r++){var i,o=e[r].split("="),a=decodeURIComponent(o[0]),c=a.length,u=!1;1===o.length?i="true":(c>2&&"[]"===a.slice(c-2)&&(u=!0,a=a.slice(0,c-2),n[a]||(n[a]=[])),i=o[1]?decodeURIComponent(o[1]):""),u?n[a].push(i):n[a]=i}return n},recognize:function(t){var e,n,r,i,o=[this.rootState],a={},s=!1;if(i=t.indexOf("?"),-1!==i){var p=t.substr(i+1,t.length);t=t.substr(0,i),a=this.parseQueryString(p)}for(t=decodeURI(t),"/"!==t.charAt(0)&&(t="/"+t),e=t.length,e>1&&"/"===t.charAt(e-1)&&(t=t.substr(0,e-1),s=!0),n=0,r=t.length;r>n&&(o=u(o,t.charAt(n)),o.length);n++);var h=[];for(n=0,r=o.length;r>n;n++)o[n].handlers&&h.push(o[n]);o=c(h);var f=h[0];return f&&f.handlers?(s&&"(.+)$"===f.regex.source.slice(-5)&&(t+="/"),l(f,t,a)):void 0}},v.prototype.map=h,v.VERSION="VERSION_STRING_PLACEHOLDER",v}()),h="/*childRoute",f=function(){this.rules={}};t(f,{config:function(t,e){"app"===t&&(t="/"),this.rules[t]||(this.rules[t]=new g(t)),this.rules[t].config(e)},recognize:function(t){var e=void 0!==arguments[1]?arguments[1]:"/",n=this;if("undefined"!=typeof t){var r=this.rules[e];if(r){var o=r.recognize(t);if(o){var a=o[o.length-1],c=a.handler,u=a.params,s={viewports:{},params:u};if(u&&u.childRoute){var l="/"+u.childRoute;s.canonicalUrl=c.rewroteUrl.substr(0,c.rewroteUrl.length-(u.childRoute.length+1)),i(c.components,function(t,e){s.viewports[e]=n.recognize(l,t)}),s.canonicalUrl+=s.viewports[Object.keys(s.viewports)[0]].canonicalUrl}else s.canonicalUrl=c.rewroteUrl,i(c.components,function(t,e){s.viewports[e]={viewports:{}}});return i(s.viewports,function(t,e){t.component=c.components[e],t.params=u}),s}}}},generate:function(t,e){var n,r="";do{if(n=null,i(this.rules,function(i){i.hasRoute(t)&&(r=i.generate(t,e)+r,n=i)}),!n)return"";t=n.name}while("/"!==n.name);return r}},{}),Object.defineProperty(f.prototype.recognize,"parameters",{get:function(){return[[$traceurRuntime.type.string],[]]}});var g=function(t){this.name=t,this.rewrites={},this.recognizer=new p};return t(g,{config:function(t){var e=this;t instanceof Array?t.forEach(function(t){return e.configOne(t)}):this.configOne(t)},getCanonicalUrl:function(t){return"."===t[0]&&(t=t.substr(1)),(""===t||"/"!==t[0])&&(t="/"+t),i(this.rewrites,function(e,n){"/"===n?"/"===t&&(t=e):0===t.indexOf(n)&&(t=t.replace(n,e))}),t},configOne:function(t){var e=this;if(t.redirectTo){if(this.rewrites[t.path])throw new Error('"'+t.path+'" already maps to "'+this.rewrites[t.path]+'"');return void(this.rewrites[t.path]=t.redirectTo)}if(t.component){if(t.components)throw new Error('A route config should have either a "component" or "components" property, but not both.');t.components=t.component,delete t.component}"string"==typeof t.components&&(t.components={"default":t.components});var n;t.as?n=[t.as]:(n=o(t.components,function(t,e){return e+":"+t}),t.components["default"]&&n.push(t.components["default"])),n.forEach(function(n){return e.recognizer.add([{path:t.path,handler:t}],{as:n})});var i=r(t);i.path+=h,this.recognizer.add([{path:i.path,handler:i}])},recognize:function(t){var e=this.getCanonicalUrl(t),n=this.recognizer.recognize(e);return n&&(n[0].handler.rewroteUrl=e),n},generate:function(t,e){return this.recognizer.generate(t,e)},hasRoute:function(t){return this.recognizer.hasRoute(t)}},{}),new f}]),function(){function t(t,e){var n=t.directive;t.directive=function(t,r){return e.register(t,r),n.apply(this,arguments)}}function e(t,e,n){function r(n,r,a,c,u){var s=function(){function o(t,e){this.controller=t,this.router=e}return o.prototype.cleanupLastView=function(){var e=this;this.previousLeaveAnimation&&(t.cancel(this.previousLeaveAnimation),this.previousLeaveAnimation=null),this.currentScope&&(this.currentScope.$destroy(),this.currentScope=null),this.currentElement&&(this.previousLeaveAnimation=t.leave(this.currentElement),this.previousLeaveAnimation.then(function(){return e.previousLeaveAnimation=null}),this.currentElement=null)},o.prototype.reuse=function(t){var n=e.when(!0),r=this.currentInstruction;return this.currentInstruction=t,this.currentController&&this.currentController.$onReuse&&(n=e.when(this.currentController.$onReuse(this.currentInstruction,r))),n},o.prototype.canReuse=function(t){var n;return n=!(!this.currentInstruction||this.currentInstruction.componentType!==t.componentType)&&(this.currentController&&this.currentController.$canReuse?this.currentController.$canReuse(t,this.currentInstruction):t===this.currentInstruction||angular.equals(t.params,this.currentInstruction.params)),e.when(n)},o.prototype.canDeactivate=function(t){return this.currentController&&this.currentController.$canDeactivate?e.when(this.currentController.$canDeactivate(t,this.currentInstruction)):e.when(!0)},o.prototype.deactivate=function(t){return this.currentController&&this.currentController.$onDeactivate?e.when(this.currentController.$onDeactivate(t,this.currentInstruction)):e.when()},o.prototype.activate=function(o){var a=this,c=this.currentInstruction;this.currentInstruction=o;var s=this.controller.$$componentName=o.componentType;if("string"!=typeof s)throw new Error("Component is not a string for "+o.urlPath);this.controller.$$routeParams=o.params,this.controller.$$template="<div "+i(s)+"></div>",this.controller.$$router=this.router.childRouter(o.componentType);var l=n.$new(),p=u(l,function(e){t.enter(e,null,a.currentElement||r),a.cleanupLastView()});return this.currentElement=p,this.currentScope=l,this.currentController=this.currentElement.children().eq(0).controller(s),this.currentController&&this.currentController.$onActivate?this.currentController.$onActivate(o,c):e.when()},o}(),l=c[0],p=c[1],h=l&&l.$$router||o;p.$$currentComponent=null,h.registerPrimaryOutlet(new s(p,h))}var o=n;return{restrict:"AE",transclude:"element",terminal:!0,priority:400,require:["?^^ngOutlet","ngOutlet"],link:r,controller:function(){function t(){}return t}(),controllerAs:"$$ngOutlet"}}function n(t){return{restrict:"EA",priority:-400,require:"ngOutlet",link:function(e,n,r,i){var o=i.$$template;n.html(o);var a=t(n.contents());a(e);var c=e[i.$$componentName];c&&(i.$$currentComponent=c,c.$router=i.$$router,c.$routeParams=i.$$routeParams)}}}function r(t,e){function n(n,i,o,a){function c(t){return s=u.generate(t),"./"+angular.stringifyInstruction(s)}var u=a&&a.$$router||r;if(u){var s=null,l=o.ngLink||"",p=e(l);if(p.constant){var h=p();i.attr("href",c(h))}else n.$watch(function(){return p(n)},function(t){return i.attr("href",c(t))},!0);i.on("click",function(e){1===e.which&&s&&(t.navigateByInstruction(s),e.preventDefault())})}}var r=t;return{require:"?^^ngOutlet",restrict:"A",link:n}}function i(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}function o(t,e,n,r,i,o){function a(){return function(t){return t}}function c(t){return t}function u(t){return!!t}function s(t){return!t}function l(t){return"string"==typeof t}function p(t){return"function"==typeof t}function h(t){return"object"==typeof t&&null!==t}function f(t){return t.name||"Root"}function g(){}function m(){}function v(t){for(var e=new G(t[t.length-1]),n=t.length-2;n>=0;n-=1)e=new G(t[n],e);return e}function d(t){var e=N.firstMatch(K,t);return u(e)?e[0]:null}function y(t){var e=[];return u(t)&&z.forEach(t,function(t,n){1==t?e.push(n):e.push(n+"="+t)}),e}function w(t){return s(t)?null:t.toString()}function b(t){U.startsWith(t,"/")&&(t=U.substring(t,1));var e=$(t),n=[],r=0;if(e.length>98)throw new M("'"+t+"' has more than the maximum supported number of segments.");for(var i=e.length-1,o=0;o<=i;o++){var a,c=e[o];if(u(a=N.firstMatch(at,c)))n.push(new it(a[1])),r+=100-o;else if(u(a=N.firstMatch(ct,c)))n.push(new ot(a[1]));else if("..."==c){if(o<i)throw new M('Unexpected "..." before the end of the path for "'+t+'".');n.push(new nt)}else n.push(new rt(c)),r+=100*(100-o)}var s=z.create();return z.set(s,"segments",n),z.set(s,"specificity",r),s}function P(t){return t.map(function(t){return t instanceof ot?"*":t instanceof nt?"...":t instanceof it?":":t instanceof rt?t.path:void 0}).join("/")}function $(t){return t.split("/")}function _(t){if(U.contains(t,"#"))throw new M('Path "'+t+'" should not include "#". Use "HashLocationStrategy" instead.');var e=N.firstMatch(ut,t);if(u(e))throw new M('Path "'+t+'" contains "'+e[0]+'" which is not allowed in a route config.')}function S(t){var e=t.component.urlParams.length>0?"?"+t.component.urlParams.join("&"):"";return t.component.urlPath+C(t)+R(t.child)+e}function R(t){if(s(t))return"";var e=t.component.urlParams.length>0?";"+t.component.urlParams.join(";"):"";return"/"+t.component.urlPath+e+C(t)+R(t.child)}function C(t){var e=[];return z.forEach(t.auxInstruction,function(t,n){e.push(R(t))}),e.length>0?"("+e.join("//")+")":""}function x(t){if(t instanceof At.Route||t instanceof At.Redirect||t instanceof At.AsyncRoute||t instanceof At.AuxRoute)return t;if(+!!t.component+ +!!t.redirectTo+ +!!t.loader!=1)throw new M('Route config should contain exactly one "component", "loader", or "redirectTo" property.');if(t.loader)return new At.AsyncRoute({path:t.path,loader:t.loader,as:t.as});if(t.component){if("object"==typeof t.component){var e=t.component;if("constructor"==e.type)return new At.Route({path:t.path,component:e.constructor,as:t.as});if("loader"==e.type)return new At.AsyncRoute({path:t.path,loader:e.loader,as:t.as});throw new M('Invalid component type "'+e.type+'". Valid types are "constructor" and "loader".')}return new At.Route(t)}return t.redirectTo?new At.Redirect({path:t.path,redirectTo:t.redirectTo}):t}function I(t,e){if(!p(t))throw new M('Component for route "'+e+'" is not defined, or is not a class.')}function O(t,e){return e instanceof Type&&t.name in e.prototype}function A(t){for(var e=L.annotations(t),n=0;n<e.length;n+=1){var r=e[n];if(r instanceof kt.CanActivate)return r.fn}return null}function k(t){return F.maximum(t,function(t){return t.component.specificity})}function j(t,e){if(p(t)){var n=L.annotations(t);if(u(n))for(var r=0;r<n.length;r++){var i=n[r];if(i instanceof bt.RouteConfig)throw new M('Child routes are not allowed for "'+e+'". Use "..." on the parent\'s route path.')}}}function T(t){return F.reduce(t,function(t,e){return l(e)?t.concat(U.split(e,Bt)):(t.push(e),t)},[])}function D(t,e){var n=zt;return u(t.child)&&(n=D(t.child,u(e)?e.child:null)),n.then(function(n){if(0==n)return!1;if(t.component.reuse)return!0;var r=Lt.getCanActivateHook(t.component.componentType);return!u(r)||r(t.component,u(e)?e.component:null)})}var E={resolve:function(e){return t.when(e)},reject:function(e){return t.reject(e)},catchError:function(t,e){return t.then(null,e)},all:function(e){return t.all(e)}},N={create:function(t,e){return e=e?e.replace(/g/g,""):"",new RegExp(t,e+"g")},firstMatch:function(t,e){return t.lastIndex=0,t.exec(e)},matcher:function(t,e){return t.lastIndex=0,{re:t,input:e}}},L={annotations:function(t){return t.annotations||[]}},z={create:function(){return{}},set:function(t,e,n){return t[e]=n},get:function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},contains:function(t,e){return t.hasOwnProperty(e)},keys:function(t){return Object.keys(t)},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},"delete":function(t,e){delete t[e]},forEach:function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},equals:function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i,o=0;o<n.length;o++)if(i=n[o],t[i]!==e[i])return!1;return!0},merge:function(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}},F=(Array,{create:function(){return[]},push:function(t,e){return t.push(e)},forEach:function(t,e){return t.forEach(e)},first:function(t){return t?t[0]:null},map:function(t,e){return t.map(e)},join:function(t,e){return t.join(e)},reduce:function(t,e,n){return t.reduce(e,n)},filter:function(t,e){return t.filter(e)},concat:function(t,e){return t.concat(e)},slice:function(t){var e=void 0!==arguments[1]?arguments[1]:0,n=void 0!==arguments[2]?arguments[2]:null;return t.slice(e,null===n?void 0:n)},maximum:function(t,e){if(0==t.length)return null;for(var n=null,r=-(1/0),i=0;i<t.length;i++){var o=t[i];if(!s(o)){var a=e(o);a>r&&(n=o,r=a)}}return n}}),U={equals:function(t,e){return t===e},split:function(t,e){return t.split(e)},substring:function(t,e,n){return t.substr(e,n)},replaceAll:function(t,e,n){return t.replace(e,n)},startsWith:function(t,e){return t.substr(0,e.length)===e},replaceAllMapped:function(t,e,n){return t.replace(e,function(t){return t.splice(-2,2),n.apply(null,t)})},contains:function(t,e){return t.indexOf(e)!=-1}},M=Error,q={callNext:function(t,e){t.fn(e)},subscribe:function(t,e){t.fn=e}};m.prototype.subscribe=function(){},m.prototype.path=function(){return e.path()},m.prototype.go=function(t){return e.path(t)};var B={Injectable:function(){}},V=function(){return B},W=this&&this.__decorate||function(t,e,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(t,e,n,r);switch(arguments.length){case 2:return t.reduceRight(function(t,e){return e&&e(t)||t},e);case 3:return t.reduceRight(function(t,r){return void(r&&r(e,n))},void 0);case 4:return t.reduceRight(function(t,r){return r&&r(e,n,t)||t},r)}},H=function(){function t(t){this.name=t}return t=W([a()],t)}();B.RouteLifecycleHook=H;var J=function(){function t(t){this.fn=t}return t=W([a()],t)}();B.CanActivate=J,B.canReuse=c(new H("canReuse")),B.canDeactivate=c(new H("canDeactivate")),B.onActivate=c(new H("onActivate")),B.onReuse=c(new H("onReuse")),B.onDeactivate=c(new H("onDeactivate"));var Q=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},G=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=c([])),void 0===r&&(r=null),this.path=t,this.child=e,this.auxiliary=n,this.params=r}return t.prototype.toString=function(){return this.path+this._matrixParamsToString()+this._auxToString()+this._childString()},t.prototype.segmentToString=function(){return this.path+this._matrixParamsToString()},t.prototype._auxToString=function(){return this.auxiliary.length>0?"("+this.auxiliary.map(function(t){return t.toString()}).join("//")+")":""},t.prototype._matrixParamsToString=function(){return s(this.params)?"":";"+y(this.params).join(";")},t.prototype._childString=function(){return u(this.child)?"/"+this.child.toString():""},t}();B.Url=G;var Y=function(t){function e(e,n,r,i){void 0===n&&(n=null),void 0===r&&(r=c([])),void 0===i&&(i=null),t.call(this,e,n,r,i)}return Q(e,t),e.prototype.toString=function(){return this.path+this._auxToString()+this._childString()+this._queryParamsToString()},e.prototype.segmentToString=function(){return this.path+this._queryParamsToString();
},e.prototype._queryParamsToString=function(){return s(this.params)?"":"?"+y(this.params).join("&")},e}(G);B.RootUrl=Y,B.pathSegmentsToUrl=v;var K=N.create("^[^\\/\\(\\)\\?;=&]+"),X=function(){function t(){}return t.prototype.peekStartsWith=function(t){return U.startsWith(this._remaining,t)},t.prototype.capture=function(t){if(!U.startsWith(this._remaining,t))throw new M('Expected "'+t+'".');this._remaining=this._remaining.substring(t.length)},t.prototype.parse=function(t){return this._remaining=t,""==t||"/"==t?new G(""):this.parseRoot()},t.prototype.parseRoot=function(){this.peekStartsWith("/")&&this.capture("/");var t=d(this._remaining);this.capture(t);var e=[];this.peekStartsWith("(")&&(e=this.parseAuxiliaryRoutes()),this.peekStartsWith(";")&&this.parseMatrixParams();var n=null;this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),n=this.parseSegment());var r=null;return this.peekStartsWith("?")&&(r=this.parseQueryParams()),new Y(t,n,e,r)},t.prototype.parseSegment=function(){if(0==this._remaining.length)return null;this.peekStartsWith("/")&&this.capture("/");var t=d(this._remaining);this.capture(t);var e=null;this.peekStartsWith(";")&&(e=this.parseMatrixParams());var n=[];this.peekStartsWith("(")&&(n=this.parseAuxiliaryRoutes());var r=null;return this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),r=this.parseSegment()),new G(t,r,n,e)},t.prototype.parseQueryParams=function(){var t={};for(this.capture("?"),this.parseParam(t);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseParam(t);return t},t.prototype.parseMatrixParams=function(){for(var t={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=d(this._remaining);if(!s(e)){this.capture(e);var n=!0;if(this.peekStartsWith("=")){this.capture("=");var r=d(this._remaining);u(r)&&(n=r,this.capture(n))}t[e]=n}},t.prototype.parseAuxiliaryRoutes=function(){var t=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)t.push(this.parseSegment()),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),t},t}();B.UrlParser=X,B.parser=new X,B.serializeParams=y;var Z=V("./url_parser"),tt=V("./instruction"),et=function(){function t(t){var e=this;this.map={},this.keys={},u(t)&&z.forEach(t,function(t,n){e.map[n]=u(t)?t.toString():null,e.keys[n]=!0})}return t.prototype.get=function(t){return z["delete"](this.keys,t),this.map[t]},t.prototype.getUnused=function(){var t=this,e=z.create(),n=z.keys(this.keys);return n.forEach(function(n){return e[n]=z.get(t.map,n)}),e},t}(),nt=function(){function t(){this.name=""}return t.prototype.generate=function(t){return""},t.prototype.match=function(t){return!0},t}(),rt=function(){function t(t){this.path=t,this.name=""}return t.prototype.match=function(t){return t==this.path},t.prototype.generate=function(t){return this.path},t}(),it=function(){function t(t){this.name=t}return t.prototype.match=function(t){return t.length>0},t.prototype.generate=function(t){if(!z.contains(t.map,this.name))throw new M("Route generator for '"+this.name+"' was not included in parameters passed.");return w(t.get(this.name))},t}(),ot=function(){function t(t){this.name=t}return t.prototype.match=function(t){return!0},t.prototype.generate=function(t){return w(t.get(this.name))},t}(),at=/^:([^\/]+)$/g,ct=/^\*([^\/]+)$/g,ut=N.create("//|\\(|\\)|;|\\?|="),st=function(){function t(t,e,n){this.instruction=t,this.remaining=e,this.remainingAux=n}return t}();B.PathMatch=st;var lt=function(){function t(t,e){this.path=t,this.handler=e,this.terminal=!0,this._cache=new Map,_(t);var n=b(t);this._segments=n.segments,this.specificity=n.specificity,this.hash=P(this._segments);var r=this._segments[this._segments.length-1];this.terminal=!(r instanceof nt)}return t.prototype.recognize=function(t){for(var e,n=t,r={},i=[],o=0;o<this._segments.length;o+=1){var a=this._segments[o];if(e=n,a instanceof nt)break;if(u(e)){if(i.push(e.path),a instanceof ot){r[a.name]=e.toString(),n=null;break}if(a instanceof it)r[a.name]=e.path;else if(!a.match(e.path))return null;n=e.child}else if(!a.match(""))return null}if(this.terminal&&u(n))return null;var c,s,l,p,h=i.join("/");if(u(e)){var f=t instanceof Z.RootUrl?t:e;p=u(f.params)?z.merge(f.params,r):r,l=Z.serializeParams(f.params),c=e.auxiliary}else p=r,c=[],l=[];return s=this._getInstruction(h,l,this,p),new st(s,n,c)},t.prototype.generate=function(t){for(var e=new et(t),n=[],r=0;r<this._segments.length;r++){var i=this._segments[r];i instanceof nt||n.push(i.generate(e))}var o=n.join("/"),a=e.getUnused(),c=Z.serializeParams(a);return this._getInstruction(o,c,this,t)},t.prototype._getInstruction=function(t,e,n,r){var i=t+"?"+e.join("?");if(this._cache.has(i))return this._cache.get(i);var o=new tt.ComponentInstruction_(t,e,n,r);return this._cache.set(i,o),o},t}();B.PathRecognizer=lt;var W=this&&this.__decorate||function(t,e,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(t,e,n,r);switch(arguments.length){case 2:return t.reduceRight(function(t,e){return e&&e(t)||t},e);case 3:return t.reduceRight(function(t,r){return void(r&&r(e,n))},void 0);case 4:return t.reduceRight(function(t,r){return r&&r(e,n,t)||t},r)}},pt=V("./route_definition");B.RouteDefinition=pt.RouteDefinition;var ht=function(){function t(t){this.configs=t}return t=W([a()],t)}();B.RouteConfig=ht;var ft=function(){function t(t){var e=t.path,n=t.component,r=t.as,i=t.data;this.path=e,this.component=n,this.as=r,this.loader=null,this.redirectTo=null,this.data=i}return t=W([a()],t)}();B.Route=ft;var gt=function(){function t(t){var e=t.path,n=t.component,r=t.as;this.data=null,this.loader=null,this.redirectTo=null,this.path=e,this.component=n,this.as=r}return t=W([a()],t)}();B.AuxRoute=gt;var mt=function(){function t(t){var e=t.path,n=t.loader,r=t.as,i=t.data;this.path=e,this.loader=n,this.as=r,this.data=i}return t=W([a()],t)}();B.AsyncRoute=mt;var vt=function(){function t(t){var e=t.path,n=t.redirectTo;this.as=null,this.loader=null,this.data=null,this.path=e,this.redirectTo=n}return t=W([a()],t)}();B.Redirect=vt;var dt=function(){function t(t,e){this._loader=t,this.data=e,this._resolvedComponent=null}return t.prototype.resolveComponentType=function(){var t=this;return u(this._resolvedComponent)?this._resolvedComponent:this._resolvedComponent=this._loader().then(function(e){return t.componentType=e,e})},t}();B.AsyncRouteHandler=dt;var yt=function(){function t(t,e){this.componentType=t,this.data=e,this._resolvedComponent=null,this._resolvedComponent=E.resolve(t)}return t.prototype.resolveComponentType=function(){return this._resolvedComponent},t}();B.SyncRouteHandler=yt;var wt=V("./path_recognizer"),bt=V("./route_config_impl"),Pt=V("./async_route_handler"),$t=V("./sync_route_handler"),Z=V("./url_parser"),_t=function(){function t(){this.names=new Map,this.auxRoutes=new Map,this.matchers=[],this.redirects=[]}return t.prototype.config=function(t){var e;if(u(t.as)&&t.as[0].toUpperCase()!=t.as[0]){var n=t.as[0].toUpperCase()+t.as.substring(1);throw new M("Route '"+t.path+"' with alias '"+t.as+"' does not begin with an uppercase letter. Route aliases should be CamelCase like '"+n+"'.")}if(t instanceof bt.AuxRoute){e=new $t.SyncRouteHandler(t.component,t.data);var r=U.startsWith(t.path,"/")?t.path.substring(1):t.path,i=new wt.PathRecognizer(t.path,e);return this.auxRoutes.set(r,i),i.terminal}if(t instanceof bt.Redirect)return this.redirects.push(new St(t.path,t.redirectTo)),!0;t instanceof bt.Route?e=new $t.SyncRouteHandler(t.component,t.data):t instanceof bt.AsyncRoute&&(e=new Pt.AsyncRouteHandler(t.loader,t.data));var i=new wt.PathRecognizer(t.path,e);return this.matchers.forEach(function(e){if(i.hash==e.hash)throw new M("Configuration '"+t.path+"' conflicts with existing route '"+e.path+"'")}),this.matchers.push(i),u(t.as)&&this.names.set(t.as,i),i.terminal},t.prototype.recognize=function(t){var e=[];return t=this._redirect(t),this.matchers.forEach(function(n){var r=n.recognize(t);u(r)&&e.push(r)}),e},t.prototype._redirect=function(t){for(var e=0;e<this.redirects.length;e+=1){var n=this.redirects[e],r=n.redirect(t);if(u(r))return r}return t},t.prototype.recognizeAuxiliary=function(t){var e=this.auxRoutes.get(t.path);return s(e)?null:e.recognize(t)},t.prototype.hasRoute=function(t){return this.names.has(t)},t.prototype.generate=function(t,e){var n=this.names.get(t);return s(n)?null:n.generate(e)},t}();B.RouteRecognizer=_t;var St=function(){function t(t,e){this.segments=[],this.toSegments=[],U.startsWith(t,"/")&&(t=t.substring(1)),this.segments=t.split("/"),U.startsWith(e,"/")&&(e=e.substring(1)),this.toSegments=e.split("/")}return t.prototype.redirect=function(t){for(var e=0;e<this.segments.length;e+=1){if(s(t))return null;var n=this.segments[e];if(n!=t.path)return null;t=t.child}for(var e=this.toSegments.length-1;e>=0;e-=1){var n=this.toSegments[e];t=new Z.Url(n,t)}return t},t}();B.Redirector=St;var Q=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Rt=function(){function t(t){this.params=t}return t.prototype.get=function(t){return normalizeBlank(z.get(this.params,t))},t}();B.RouteParams=Rt;var Ct=function(){function t(t,e,n){this.component=t,this.child=e,this.auxInstruction=n}return t.prototype.replaceChild=function(e){return new t(this.component,e,this.auxInstruction)},t}();B.Instruction=Ct;var xt=function(){function t(t,e,n){this.component=t,this.child=e,this.auxUrls=n}return t}();B.PrimaryInstruction=xt,B.stringifyInstruction=S;var It=function(){function t(){this.reuse=!1}return Object.defineProperty(t.prototype,"componentType",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"specificity",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"terminal",{get:function(){return unimplemented()},enumerable:!0,configurable:!0}),t}();B.ComponentInstruction=It;var Ot=function(t){function e(e,n,r,i){void 0===i&&(i=null),t.call(this),this._recognizer=r,this.urlPath=e,this.urlParams=n,this.params=i}return Q(e,t),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._recognizer.handler.componentType},enumerable:!0,configurable:!0}),e.prototype.resolveComponentType=function(){return this._recognizer.handler.resolveComponentType()},Object.defineProperty(e.prototype,"specificity",{get:function(){return this._recognizer.specificity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"terminal",{get:function(){return this._recognizer.terminal},enumerable:!0,configurable:!0}),e.prototype.routeData=function(){return this._recognizer.handler.data},e}(It);B.ComponentInstruction_=Ot;var At=V("./route_config_decorator");B.normalizeRouteConfig=x,B.assertComponentExists=I;var kt=V("./lifecycle_annotations_impl");B.hasLifecycleHook=O,B.getCanActivateHook=A;var W=this&&this.__decorate||function(t,e,n,r){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(t,e,n,r);switch(arguments.length){case 2:return t.reduceRight(function(t,e){return e&&e(t)||t},e);case 3:return t.reduceRight(function(t,r){return void(r&&r(e,n))},void 0);case 4:return t.reduceRight(function(t,r){return r&&r(e,n,t)||t},r)}},jt=V("./route_recognizer"),tt=V("./instruction"),bt=V("./route_config_impl"),Tt=V("angular2/src/core/di"),Dt=V("./route_config_nomalizer"),Z=V("./url_parser"),Et=E.resolve(null),Nt=function(){function t(){this._rules=new Map}return t.prototype.config=function(t,e){e=Dt.normalizeRouteConfig(e),e instanceof bt.Route?Dt.assertComponentExists(e.component,e.path):e instanceof bt.AuxRoute&&Dt.assertComponentExists(e.component,e.path);var n=this._rules.get(t);s(n)&&(n=new jt.RouteRecognizer,this._rules.set(t,n));var r=n.config(e);e instanceof bt.Route&&(r?j(e.component,e.path):this.configFromComponent(e.component))},t.prototype.configFromComponent=function(t){var e=this;if(p(t)&&!this._rules.has(t)){var n=L.annotations(t);if(u(n))for(var r=0;r<n.length;r++){var i=n[r];if(i instanceof bt.RouteConfig){var o=i.configs;o.forEach(function(n){return e.config(t,n)})}}}},t.prototype.recognize=function(t,e){var n=Z.parser.parse(t);return this._recognize(n,e)},t.prototype._recognize=function(t,e){var n=this;return this._recognizePrimaryRoute(t,e).then(function(t){return n._completeAuxiliaryRouteMatches(t,e)})},t.prototype._recognizePrimaryRoute=function(t,e){var n=this,r=this._rules.get(e);if(s(r))return Et;var i=r.recognize(t),o=i.map(function(t){return n._completePrimaryRouteMatch(t)});return E.all(o).then(k)},t.prototype._completePrimaryRouteMatch=function(t){var e=this,n=t.instruction;return n.resolveComponentType().then(function(r){return e.configFromComponent(r),n.terminal?new tt.PrimaryInstruction(n,null,t.remainingAux):e._recognizePrimaryRoute(t.remaining,r).then(function(e){return s(e)?null:new tt.PrimaryInstruction(n,e,t.remainingAux)})})},t.prototype._completeAuxiliaryRouteMatches=function(t,e){var n=this;if(s(t))return Et;var r=this._rules.get(e),i={},o=t.auxUrls.map(function(t){var o=r.recognizeAuxiliary(t);return s(o)?Et:n._completePrimaryRouteMatch(o).then(function(r){if(u(r))return n._completeAuxiliaryRouteMatches(r,e).then(function(e){i[t.path]=e})})});return E.all(o).then(function(e){return s(t.child)?new tt.Instruction(t.component,null,i):n._completeAuxiliaryRouteMatches(t.child,t.component.componentType).then(function(e){return new tt.Instruction(t.component,e,i)})})},t.prototype.generate=function(t,e){for(var n=[],r=e,i=!1,o=0;o<t.length;o+=1){var a=t[o];if(s(r))throw new M('Could not find route named "'+a+'".');if(!l(a))throw new M('Unexpected segment "'+a+'" in link DSL. Expected a string.');if(""==a||"."==a||".."==a)throw new M('"'+a+'/" is only allowed at the beginning of a link DSL.');var c={};if(o+1<t.length){var p=t[o+1];h(p)&&(c=p,o+=1)}var g=this._rules.get(r);if(s(g))throw new M('Component "'+f(r)+'" has no route config.');var m=g.generate(a,c);if(s(m))throw new M('Component "'+f(r)+'" has no route named "'+a+'".');n.push(m),r=m.componentType,i=m.terminal}var v=null;if(!i){if(v=this._generateRedirects(r),u(v)){for(var d=v;u(d.child);)d=d.child;i=d.component.terminal}if(u(r)&&!i)throw new M('Link "'+F.toJSON(t)+'" does not resolve to a terminal or async instruction.')}for(;n.length>0;)v=new tt.Instruction(n.pop(),v,{});return v},t.prototype._generateRedirects=function(t){if(s(t))return null;var e=this._rules.get(t);if(s(e))return null;for(var n=0;n<e.redirects.length;n+=1){var r=e.redirects[n];if(1==r.segments.length&&""==r.segments[0]){var i=Z.pathSegmentsToUrl(r.toSegments),o=e.recognize(i),a=F.maximum(o,function(t){return t.instruction.specificity});if(u(a)){var c=this._generateRedirects(a.instruction.componentType);return new tt.Instruction(a.instruction,c,{})}return null}}return null},t=W([Tt.Injectable()],t)}();B.RouteRegistry=Nt;var Q=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},tt=V("./instruction"),Lt=V("./route_lifecycle_reflector"),zt=E.resolve(!0),Ft=E.resolve(!1),Ut=function(){function t(t,e,n){this.registry=t,this.parent=e,this.hostComponent=n,this.navigating=!1,this._currentInstruction=null,this._currentNavigation=zt,this._outlet=null,this._auxRouters=new Map,this._subject=new g}return t.prototype.childRouter=function(t){return this._childRouter=new qt(this,t)},t.prototype.auxRouter=function(t){return new qt(this,t)},t.prototype.registerPrimaryOutlet=function(t){if(u(t.name))throw new M("registerAuxOutlet expects to be called with an unnamed outlet.");return this._outlet=t,u(this._currentInstruction)?this.commit(this._currentInstruction,!1):zt},t.prototype.registerAuxOutlet=function(t){var e=t.name;if(s(e))throw new M("registerAuxOutlet expects to be called with an outlet with a name.");var n=this.auxRouter(this.hostComponent);this._auxRouters.set(e,n),n._outlet=t;var r;return u(this._currentInstruction)&&u(r=this._currentInstruction.auxInstruction[e])?n.commit(r):zt},t.prototype.isRouteActive=function(t){for(var e=this;u(e.parent)&&u(t.child);)e=e.parent,t=t.child;return u(this._currentInstruction)&&this._currentInstruction.component==t.component},t.prototype.config=function(t){var e=this;return t.forEach(function(t){e.registry.config(e.hostComponent,t)}),this.renavigate()},t.prototype.navigate=function(t){var e=this.generate(t);return this.navigateByInstruction(e,!1)},t.prototype.navigateByUrl=function(t,e){var n=this;return void 0===e&&(e=!1),this._currentNavigation=this._currentNavigation.then(function(r){return n.lastNavigationAttempt=t,n._startNavigating(),n._afterPromiseFinishNavigating(n.recognize(t).then(function(t){return!s(t)&&n._navigate(t,e)}))})},t.prototype.navigateByInstruction=function(t,e){var n=this;return void 0===e&&(e=!1),s(t)?Ft:this._currentNavigation=this._currentNavigation.then(function(r){return n._startNavigating(),n._afterPromiseFinishNavigating(n._navigate(t,e))})},t.prototype._navigate=function(t,e){var n=this;return this._settleInstruction(t).then(function(e){return n._canReuse(t)}).then(function(e){return n._canActivate(t)}).then(function(r){return!!r&&n._canDeactivate(t).then(function(r){if(r)return n.commit(t,e).then(function(e){return n._emitNavigationFinish(tt.stringifyInstruction(t)),!0})})})},t.prototype._settleInstruction=function(t){var e=this,n=[];return s(t.component.componentType)&&n.push(t.component.resolveComponentType().then(function(t){e.registry.configFromComponent(t)})),u(t.child)&&n.push(this._settleInstruction(t.child)),z.forEach(t.auxInstruction,function(t,r){n.push(e._settleInstruction(t))}),E.all(n)},t.prototype._emitNavigationFinish=function(t){q.callNext(this._subject,t)},t.prototype._afterPromiseFinishNavigating=function(t){var e=this;return E.catchError(t.then(function(t){return e._finishNavigating()}),function(t){throw e._finishNavigating(),t})},t.prototype._canReuse=function(t){var e=this;return s(this._outlet)?Ft:this._outlet.canReuse(t.component).then(function(n){if(t.component.reuse=n,n&&u(e._childRouter)&&u(t.child))return e._childRouter._canReuse(t.child)})},t.prototype._canActivate=function(t){return D(t,this._currentInstruction)},t.prototype._canDeactivate=function(t){var e=this;if(s(this._outlet))return zt;var n,r=null,i=!1,o=null;return u(t)&&(r=t.child,o=t.component,i=t.component.reuse),n=i?zt:this._outlet.canDeactivate(o),n.then(function(t){return 0!=t&&(!u(e._childRouter)||e._childRouter._canDeactivate(r))})},t.prototype.commit=function(t,e){var n=this;void 0===e&&(e=!1),this._currentInstruction=t;var r=zt;if(u(this._outlet)){var i=t.component;r=i.reuse?this._outlet.reuse(i):this.deactivate(t).then(function(t){return n._outlet.activate(i)}),u(t.child)&&(r=r.then(function(e){if(u(n._childRouter))return n._childRouter.commit(t.child)}))}var o=[];return this._auxRouters.forEach(function(e,n){o.push(e.commit(t.auxInstruction[n]))}),r.then(function(t){return E.all(o)})},t.prototype._startNavigating=function(){this.navigating=!0},t.prototype._finishNavigating=function(){this.navigating=!1},t.prototype.subscribe=function(t){return q.subscribe(this._subject,t)},t.prototype.deactivate=function(t){var e=this,n=null,r=null;u(t)&&(n=t.child,r=t.component);var i=zt;return u(this._childRouter)&&(i=this._childRouter.deactivate(n)),u(this._outlet)&&(i=i.then(function(t){return e._outlet.deactivate(r)})),i},t.prototype.recognize=function(t){return this.registry.recognize(t,this.hostComponent)},t.prototype.renavigate=function(){return s(this.lastNavigationAttempt)?this._currentNavigation:this.navigateByUrl(this.lastNavigationAttempt)},t.prototype.generate=function(t){var e=T(t),n=F.first(e),r=F.slice(e,1),i=this;if(""==n)for(;u(i.parent);)i=i.parent;else if(".."==n){for(i=i.parent;".."==F.first(r);)if(r=F.slice(r,1),i=i.parent,s(i))throw new M('Link "'+F.toJSON(t)+'" has too many "../" segments.')}else if("."!=n)throw new M('Link "'+F.toJSON(t)+'" must start with "/", "./", or "../"');if(""==r[r.length-1]&&r.pop(),r.length<1){var o='Link "'+F.toJSON(t)+'" must include a route name.';throw new M(o)}for(var a=[],c=i.parent;u(c);)a.unshift(c._currentInstruction),c=c.parent;for(var l=this.registry.generate(r,i.hostComponent);a.length>0;)l=a.pop().replaceChild(l);return l},t}();B.Router=Ut;var Mt=function(t){function e(e,n,r){var i=this;t.call(this,e,null,r),this._location=n,this._location.subscribe(function(t){return i.navigateByUrl(t.url,u(t.pop))}),this.registry.configFromComponent(r),this.navigateByUrl(n.path())}return Q(e,t),e.prototype.commit=function(e,n){var r=this;void 0===n&&(n=!1);var i=tt.stringifyInstruction(e);i.length>0&&(i="/"+i);var o=t.prototype.commit.call(this,e);return n||(o=o.then(function(t){r._location.go(i)})),o},e}(Ut);B.RootRouter=Mt;var qt=function(t){function e(e,n){t.call(this,e.registry,e,n),this.parent=e}return Q(e,t),e.prototype.navigateByUrl=function(t,e){return void 0===e&&(e=!1),this.parent.navigateByUrl(t,e)},e.prototype.navigateByInstruction=function(t,e){return void 0===e&&(e=!1),this.parent.navigateByInstruction(t,e)},e}(Ut),Bt=new RegExp("/");B.getCanActivateHook=function(t){var e=n.getTypeByName(t);return e&&e.$canActivate&&function(t,n){return o.invoke(e.$canActivate,null,{$nextInstruction:t,$prevInstruction:n})}},B.assertComponentExists=function(){},angular.stringifyInstruction=B.stringifyInstruction;var Nt=B.RouteRegistry,Mt=B.RootRouter,Vt=new Nt,Wt=new m;n(function(t,e){angular.isArray(e.$routeConfig)&&e.$routeConfig.forEach(function(e){Vt.config(t,e)})});var Ht=new Object,Jt=new Mt(Vt,Wt,Ht);return i.$watch(function(){return e.path()},function(t){Jt.lastNavigationAttempt!==t&&Jt.navigateByUrl(t)}),Jt.subscribe(function(){i.$broadcast("$routeChangeSuccess",{})}),Jt}t.$inject=["$compileProvider","$$directiveIntrospectorProvider"];var a=function(){function t(){this.directiveBuffer=[],this.directiveFactoriesByName={},this.onDirectiveRegistered=null}return t.prototype.register=function(t,e){angular.isArray(e)&&(e=e[e.length-1]),this.directiveFactoriesByName[t]=e,this.onDirectiveRegistered?this.onDirectiveRegistered(t,e):this.directiveBuffer.push({name:t,factory:e})},t.prototype.$get=function(){var t=this,e=function(e){for(t.onDirectiveRegistered=e;t.directiveBuffer.length>0;){var n=t.directiveBuffer.pop();t.onDirectiveRegistered(n.name,n.factory)}};return e.getTypeByName=function(e){return t.directiveFactoriesByName[e]},e},t}();e.$inject=["$animate","$q","$router"],n.$inject=["$compile"],r.$inject=["$router","$parse"],angular.module("ngComponentRouter",[]).directive("ngOutlet",e).directive("ngOutlet",n).directive("ngLink",r),angular.module("ng").provider("$$directiveIntrospector",a).config(t),angular.module("ngComponentRouter").value("$route",null).factory("$router",["$q","$location","$$directiveIntrospector","$browser","$rootScope","$injector",o])}(),function(t,e){t.module("smart-table",[]).run(["$templateCache",function(t){t.put("template/smart-table/pagination.html",'<nav><ul class="list-unstyled list-inline"><li class="pull-left"><p><span ng-if="itemCount != totalItems">{{itemCount}} of {{totalItems}}</span><span ng-if="itemCount == totalItems">{{itemCount}}</span> items found. <span ng-if="itemCount > 0">Displaying items {{(currentPage - 1) * stItemsByPage + 1 }} - {{ currentPage == numPages ? itemCount : currentPage * stItemsByPage }}.</span></p></li><li ng-if="numPages >= 2" ng-disabled="currentPage == numPages" class="pull-right"><a style="position: relative; top: 3px;" ng-disabled="currentPage == numPages" ng-click="selectPage(numPages)"><i ng-class="{\'text-muted\': currentPage == numPages}" class="glyphicon glyphicon-step-forward"></i></a></li><li ng-if="numPages >= 2" ng-disabled="currentPage == numPages" class="pull-right"><a style="position: relative; top: 3px;" ng-disabled="currentPage == numPages" ng-click="selectPage(currentPage+1)"><i ng-class="{\'text-muted\': currentPage == numPages}" class="glyphicon glyphicon-forward"></i></a></li><li ng-if="numPages >= 2" class="pull-right"><span style="margin-left: 5px; margin-right: 5px;">Page <input type="text" class="input-xs text-center" style="width: 40px;" ng-model="pageState.txtPage" ng-change="updatePage()" ng-blur="updatePage(true)"  ng-model-options="{ updateOn: \'default\', debounce: {\'default\': 500, \'blur\': 0} }" /> of {{numPages}}</span></li><li ng-if="numPages >= 2" ng-disabled="currentPage == 1" class="pull-right"><a style="position: relative; top: 3px;" ng-disabled="currentPage == 1" ng-click="selectPage(currentPage-1)"><i ng-class="{\'text-muted\': currentPage == 1}" class="glyphicon glyphicon-backward"></i></a></li><li ng-if="numPages >= 2" ng-disabled="currentPage == 1" class="pull-right"><a style="position: relative; top: 3px;" ng-disabled="currentPage == 1" ng-click="selectPage(1)"><i ng-class="{\'text-muted\': currentPage == 1}" class="glyphicon glyphicon-step-backward"></i></a></li></ul></nav>'),t.put("template/smart-table/stSelectMultiple.html",'<div class="dropdown dropdown-filter">  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">  {{dropdownLabel}}&nbsp;<span class="caret"></span>  </button>  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">    <li ng-repeat="item in distinctItems">      <label>        <input type="checkbox" ng-model="item.selected" style="margin-left: 3px; margin-right: 3px;">{{item.label}}</label>    </li>  </ul></div>')}]),t.module("smart-table").controller("stTableController",["$scope","$parse","$filter","$attrs",function(n,r,i,o){function a(t){return t?[].concat(t):[]}function c(){m=a(u(n)),d===!0&&y.pipe()}var u,s,l=o.stTable,p=r(l),h=p.assign,f=i("orderBy"),g=i("filter"),m=a(p(n)),v={sort:{},search:{},pagination:{start:0}},d=!0,y=this;o.stSafeSrc&&(u=r(o.stSafeSrc),n.$watch(function(){var t=u(n);return t?t.length:0},function(t){t!==m.length&&c()}),n.$watch(function(){return u(n)},function(t,e){t!==e&&c()})),this.sortBy=function(e,n){return v.sort.predicate=e,v.sort.reverse=n===!0,t.isFunction(e)?v.sort.functionName=e.name:delete v.sort.functionName,v.pagination.start=0,this.pipe()},this.search=function(e,n,r){var i=v.search.predicateObject||{},o=n?n:"$";return e=t.isString(e)?e.trim():e,i[o]=e,e||delete i[o],v.search.predicateObject=i,v.pagination.start=0,v.search.strict=r,this.pipe()},this.pipe=function(){var t=v.pagination,r=v.search.predicateObject?g(m,v.search.predicateObject,v.search.strict):m;v.sort.predicate&&(r=f(r,v.sort.predicate,v.sort.reverse)),t.number!==e&&(t.numberOfPages=r.length>0?Math.ceil(r.length/t.number):1,t.start=t.start>=r.length?(t.numberOfPages-1)*t.number:t.start,t.itemCount=r.length,t.totalItems=m.length,r=r.slice(t.start,t.start+parseInt(t.number))),h(n,r)},this.select=function(t,n){var r=m,i=r.indexOf(t);i!==-1&&("single"===n?(t.isSelected=t.isSelected!==!0,s&&(s.isSelected=!1),s=t.isSelected===!0?t:e):r[i].isSelected=!r[i].isSelected)},this.slice=function(t,e){return v.pagination.start=t,v.pagination.number=e,this.pipe()},this.tableState=function(){return v},this.setFilterFunction=function(t){g=i(t)},this.setSortFunction=function(t){f=i(t)},this.preventPipeOnWatch=function(){d=!1}}]).directive("stTable",function(){return{restrict:"A",controller:"stTableController",link:function(t,e,n,r){n.stSetFilter&&r.setFilterFunction(n.stSetFilter),n.stSetSort&&r.setSortFunction(n.stSetSort)}}}),t.module("smart-table").directive("stSearch",["$timeout",function(t){return{require:"^stTable",scope:{predicate:"=?stSearch"},link:function(e,n,r,i){var o=i,a=null,c=r.stDelay||400;e.$watch("predicate",function(t,e){t!==e&&(i.tableState().search={},o.search(n[0].value||"",t))}),e.$watch(function(){return i.tableState().search},function(t){var r=e.predicate||"$";t.predicateObject&&t.predicateObject[r]!==n[0].value&&(n[0].value=t.predicateObject[r]||"")},!0);var u="input"===n[0].tagName.toLowerCase()?"keydown":"change";n.bind(u,function(n){n=n.originalEvent||n||window.event;var r=n.target||n.srcElement;null!==a&&t.cancel(a),a=t(function(){o.search(r.value,e.predicate||""),a=null},c)})}}}]),t.module("smart-table").directive("stSelectRow",function(){return{restrict:"A",require:"^stTable",scope:{row:"=stSelectRow"},link:function(t,e,n,r){var i=n.stSelectMode||"single";e.bind("click",function(){t.$apply(function(){r.select(t.row,i)})}),t.$watch("row.isSelected",function(t){t===!0?e.addClass("st-selected"):e.removeClass("st-selected")})}}}),t.module("smart-table").directive("stSort",["$parse",function(n){return{restrict:"A",require:"^stTable",link:function(r,i,o,a){function c(){p++,s=t.isFunction(l(r))?l(r):o.stSort,p%3===0&&o.stSkipNatural===e?(p=0,a.tableState().sort={},a.tableState().pagination.start=0,a.pipe()):a.sortBy(s,p%2===0)}var u,s=o.stSort,l=n(s),p=0,h=o.stClassAscent||"st-sort-ascent",f=o.stClassDescent||"st-sort-descent",g=[h,f];o.stSortDefault&&(u=r.$eval(o.stSortDefault)!==e?r.$eval(o.stSortDefault):o.stSortDefault),i.bind("click",function(){s&&r.$apply(c)}),u&&(p="reverse"===o.stSortDefault?1:0,c()),r.$watch(function(){return a.tableState().sort},function(t){t.predicate!==s?(p=0,i.removeClass(h).removeClass(f)):(p=t.reverse===!0?2:1,i.removeClass(g[p%2]).addClass(g[p-1]))},!0)}}}]),t.module("smart-table").directive("stPagination",function(){return{restrict:"EA",require:"^stTable",scope:{stItemsByPage:"=?",stDisplayedPages:"=?",stPageChange:"&",txtPage:"=?"},templateUrl:function(t,e){return e.stTemplate?e.stTemplate:"template/smart-table/pagination.html"},link:function(t,e,n,r){function i(){var e,n,i=r.tableState().pagination,o=1,a=t.currentPage;for(t.currentPage=Math.floor(i.start/i.number)+1,t.itemCount=i.itemCount,t.totalItems=i.totalItems,o=Math.max(o,t.currentPage-Math.abs(Math.floor(t.stDisplayedPages/2))),e=o+t.stDisplayedPages,e>i.numberOfPages&&(e=i.numberOfPages+1,o=Math.max(1,e-t.stDisplayedPages)),t.pages=[],t.numPages=i.numberOfPages,n=o;n<e;n++)t.pages.push(n);a!==t.currentPage&&(t.stPageChange({newPage:t.currentPage}),t.pageState.txtPage=t.currentPage)}t.stItemsByPage=t.stItemsByPage?+t.stItemsByPage:10,t.stDisplayedPages=t.stDisplayedPages?+t.stDisplayedPages:5,t.pageState={txtPage:1},t.currentPage=1,t.pages=[],t.itemCount=0,t.totalItems=0,t.updatePage=function(e){if(e&&""===t.pageState.txtPage&&(t.pageState.txtPage=t.currentPage),""!==t.pageState.txtPage){var n=+t.pageState.txtPage;if(isNaN(n)||n<1)return void(t.pageState.txtPage=t.currentPage);n>t.numPages&&(n=t.pageState.txtPage=t.numPages),n!==t.currentPage&&t.selectPage(n)}},t.$watch(function(){return r.tableState().pagination},i,!0),t.$watch("stItemsByPage",function(e,n){e!==n&&(t.selectPage(1),t.pageState.txtPage=1)}),t.$watch("stDisplayedPages",i),t.selectPage=function(e){e>0&&e<=t.numPages&&(r.slice((e-1)*t.stItemsByPage,t.stItemsByPage),t.pageState.txtPage=e)},r.tableState().pagination.number||r.slice(0,t.stItemsByPage)}}}),t.module("smart-table").directive("stPipe",function(){return{require:"stTable",scope:{stPipe:"="},link:{pre:function(e,n,r,i){t.isFunction(e.stPipe)&&(i.preventPipeOnWatch(),i.pipe=function(){return e.stPipe(i.tableState(),i)})},post:function(t,e,n,r){r.pipe()}}}}),t.module("smart-table").directive("csSelect",function(){return{require:"^stTable",template:"",scope:{row:"=csSelect"},link:function(t,e,n,r){e.bind("change",function(){t.$apply(function(){r.select(t.row,"multiple")})}),t.$watch("row.isSelected",function(t){t===!0?e.parent().addClass("st-selected"):e.parent().removeClass("st-selected")})}}}),t.module("smart-table").directive("csSelectAll",function(){return{require:"^stTable",template:"",scope:{rows:"=csSelectAll"},link:function(t,e,n,r){e.bind("change",function(e){t.globalInputState=e.target.checked,t.$apply(function(){$.each(t.rows,function(t,n){n.isSelected!==e.target.checked&&r.select(n,"multiple");
})})}),t.$watch("row.isSelected",function(t){t===!0?e.parent().addClass("st-selected"):e.parent().removeClass("st-selected")})}}}),t.module("smart-table").directive("csCheckAll",function(){return{require:"^stTable",template:"",scope:{rows:"=csCheckAll"},link:function(t,e){e.bind("change",function(e){t.globalInputState=e.target.checked,t.$apply(function(){$.each(t.rows,function(t,n){n.isChecked=e.target.checked})})})}}}),t.module("smart-table").directive("stSearchOptions",function(){return{require:"^stTable",scope:{stSearchOptions:"="},link:function(t,e,n,r){t.$watch("stSearchOptions.model",function(e){r.search(e,t.stSearchOptions.field,t.stSearchOptions.strict)}),t.$watch("stSearchOptions.range",function(t){t&&r.search(t,t.field)})}}}),t.module("smart-table").directive("stSelectDistinct",[function(){return{restrict:"E",require:"^stTable",scope:{collection:"=",predicate:"@",predicateExpression:"="},template:'<select ng-model="selectedOption" ng-change="optionChanged(selectedOption)" ng-options="opt for opt in distinctItems"></select>',link:function(t,e,n,r){var i=function(){var e=t.predicate;return!e&&t.predicateExpression&&(e=t.predicateExpression),e};t.$watch("collection",function(e){var n=i();if(e){var r=[];t.distinctItems=["All"],angular.forEach(t.collection,function(t){var e=t[n];e&&e.trim().length>0&&r.indexOf(e)===-1&&r.push(e)}),r.sort(),t.distinctItems=t.distinctItems.concat(r),t.selectedOption=t.distinctItems[0],t.optionChanged(t.selectedOption)}},!0),t.optionChanged=function(t){var e=i(),n={};n.distinct=t,"All"===n.distinct&&(n.distinct=""),r.search(n,e)}}}}]).directive("stSelectMultiple",[function(){return{restrict:"E",require:"^stTable",scope:{collection:"=",items:"=",predicate:"@",predicateExpression:"=",title:"=",selectedOptions:"="},templateUrl:function(t,e){return e.stTemplate?e.stTemplate:"template/smart-table/stSelectMultiple.html"},link:function(t,e,n,r){function i(){var e=t.predicate;return!e&&t.predicateExpression&&(e=t.predicateExpression),e}function o(){var e=[];return angular.forEach(t.distinctItems,function(t){t.selected&&e.push(t.value)}),e}function a(){var e=[];return angular.forEach(t.distinctItems,function(t){t.selected&&e.push(t)}),t.selectedOptions=e,e}function c(){var e=t.distinctItems.length,n=a();return e===n.length||0===n.length?t.title||"All":1===n.length?n[0].label||n[0].value:n.length+" items"}function u(){t.dropdownLabel=c();var e=i(),n={matchAny:{}};n.matchAny.items=o();var a=n.matchAny.items.length;0===a||a===t.distinctItems.length?n.matchAny.all=!0:n.matchAny.all=!1,r.search(n,e)}function s(t,e){var n=_.find(t,function(t){return t.value===e});return n}function l(t,e){if(t&&t.trim().length>0&&!s(e,t)){var n={label:t,value:t,selected:!0};e.push(n)}}function p(e,n){var r=i(),o=[];n&&n.length>0?o=n:angular.forEach(e,function(t){var e=t[r];l(e,o)}),o.sort(function(t,e){return t.value>e.value?1:t.value<e.value?-1:0}),t.distinctItems=o,t.$watch("distinctItems",function(t,e){u()},!0),u()}function h(){p(t.collection,t.items)}t.dropdownLabel="",t.filterChanged=u,h()}}}]).filter("customFilter",["$filter",function(e){var n=e("filter"),r=function(t,e){return e=(""+e).toLowerCase(),(""+t).toLowerCase().indexOf(e)>-1};return function(e,i){function o(e,n){var i,o,a,c,u=n.before,s=n.after,l=n.lower,p=n.higher;if(t.isObject(n)){if(n.distinct)return!(!e||e.toLowerCase()!==n.distinct.toLowerCase());if(n.matchAny){if(n.matchAny.all)return!0;if(!e)return!1;for(var h=0;h<n.matchAny.items.length;h++)if(e.toLowerCase()===n.matchAny.items[h].toLowerCase())return!0;return!1}if(n.before||n.after)try{return!(u&&(i=n.before,a=new Date(e),c=new Date(i),a>c))&&!(s&&(o=n.after,a=new Date(e),c=new Date(o),a<c))}catch(f){return!1}else if(l||p)return!(l&&(i=n.lower,e>i))&&!(p&&(o=n.higher,e<o));return!0}return r(e,n)}var a=n(e,i,o);return a}}])}(angular);
