var asm;
(function (asm) {
    var UpdateInventoryModalController = (function () {
        function UpdateInventoryModalController(Modal, $http, $timeout, $scope, $q, $translate, Loading, Dialog, Commands, GlobalServices, $filter, constants) {
            this.Modal = Modal;
            this.$http = $http;
            this.$timeout = $timeout;
            this.$scope = $scope;
            this.$q = $q;
            this.$translate = $translate;
            this.Loading = Loading;
            this.Dialog = Dialog;
            this.Commands = Commands;
            this.GlobalServices = GlobalServices;
            this.$filter = $filter;
            this.constants = constants;
            this.errors = new Array();
            this.types = [];
            this.osCredentials = [];
            this.inventoryUpdateDisabled = false;
            var self = this;
            self.types = self.constants.serviceTypes;
            self.initialize();
        }
        UpdateInventoryModalController.prototype.initialize = function () {
            var self = this;
            var d = self.$q.defer();
            self.GlobalServices.ClearErrors(self.errors);
            self.Loading(d.promise);
            self.updateServiceInventory(self.$scope.modal.params.service.id)
                .then(function (response) {
                //make copy for resource tables to use because it mutates it
                self.serviceCopy = angular.copy(response.data.responseObj);
                self.service = response.data.responseObj;
                //self.service = { "id": null, "name": "", "template": "Generated Existing Service Template", "health": "pending", "deployedBy": null, "deployedOn": null, "description": null, "errors": null, "firmwareCompliant": "unknown", "firmwarePackageName": null, "brownField": true, "count_application": 0, "count_cluster": 2, "count_server": 0, "count_storage": 0, "count_switch": 0, "count_vm": 0, "count_scaleio": 1, "components": [{ "id": "4fdfeed4-9ebe-46db-b85d-61bdf8389c6e", "name": "aer1-cvcsa65.asm.delllabs.net", "type": "cluster", "subtype": "HYPERCONVERGED", "componentid": "component-cluster-vcenter-1", "identifier": null, "helptext": null, "relatedcomponents": [{ "id": "cd524098-0b7c-4b9d-ac10-2c2180dc25af", "name": "aer1-host-c04.asm.delllabs.net", "installOrder": null, "subtype": null }, { "id": "4d029081-26f9-4ddb-9a9f-750c6307e9b3", "name": "aer1-host-c06.asm.delllabs.net", "installOrder": null, "subtype": null }, { "id": "eaa611cb-43e8-4860-b2f8-bd9cdfc3eda7", "name": "aer1-host-c05.asm.delllabs.net", "installOrder": null, "subtype": null }, { "id": "7cd66d19-b96d-4794-97ef-15d7fa9dc03e", "name": "aer1-vxflexos-gw-2", "installOrder": null, "subtype": null }], "categories": [{ "id": "asm::cluster", "name": "Cluster Settings", "settings": [{ "id": "asm_guid", "value": "vcenter-100.68.97.72", "datatype": "enum", "componentid": "component-cluster-vcenter-1", "name": "Target Virtual Machine Manager", "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": false, "options": [{ "id": "", "name": "Select...", "dependencyTarget": null, "dependencyValue": null }, { "id": "vcenter-100.68.97.65", "name": "aer1-vcsa-mgmt.asm.delllabs.net", "dependencyTarget": null, "dependencyValue": null }, { "id": "vcenter-100.68.97.72", "name": "aer1-cvcsa65.asm.delllabs.net", "dependencyTarget": null, "dependencyValue": null }], "requireatdeployment": false, "hidefromtemplate": false, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "datacenter", "value": "aer1-dc-1", "datatype": "enum", "componentid": "component-cluster-vcenter-1", "name": "Data Center Name", "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": false, "options": [{ "id": "", "name": "Select...", "dependencyTarget": null, "dependencyValue": null }, { "id": "$new$", "name": "Create New Datacenter...", "dependencyTarget": null, "dependencyValue": null }, { "id": "aer1-dc-1", "name": "aer1-dc-1", "dependencyTarget": "asm_guid", "dependencyValue": "vcenter-100.68.97.72" }, { "id": "VXRC-Datacenter", "name": "VXRC-Datacenter", "dependencyTarget": "asm_guid", "dependencyValue": "vcenter-100.68.97.65" }], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "$new$datacenter", "value": null, "datatype": "string", "componentid": "component-cluster-vcenter-1", "name": "New datacenter name", "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": "datacenter", "dependencyValue": "$new$", "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "cluster", "value": "aer1-cluster-1", "datatype": "enum", "componentid": "component-cluster-vcenter-1", "name": "Cluster Name", "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": false, "options": [{ "id": "", "name": "Select...", "dependencyTarget": null, "dependencyValue": null }, { "id": "$new$", "name": "Create New Cluster...", "dependencyTarget": null, "dependencyValue": null }, { "id": "aer1-cluster-1", "name": "aer1-cluster-1", "dependencyTarget": "datacenter", "dependencyValue": "aer1-dc-1" }, { "id": "VXRC-Cluster", "name": "VXRC-Cluster", "dependencyTarget": "datacenter", "dependencyValue": "VXRC-Datacenter" }], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "$new$cluster", "value": null, "datatype": "string", "componentid": "component-cluster-vcenter-1", "name": "New cluster name", "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": "cluster", "dependencyValue": "$new$", "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "vds_enabled", "value": "distributed", "datatype": "radio", "componentid": "component-cluster-vcenter-1", "name": "Switch Type", "tooltip": null, "required": false, "min": 0, "max": 0, "multiple": false, "options": [{ "id": "standard", "name": "Standard", "dependencyTarget": null, "dependencyValue": null }, { "id": "distributed", "name": "Distributed", "dependencyTarget": null, "dependencyValue": null }], "requireatdeployment": false, "hidefromtemplate": true, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "ha_config", "value": "true", "datatype": "boolean", "componentid": "component-cluster-vcenter-1", "name": "Cluster HA Enabled", "tooltip": null, "required": false, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": "cluster", "dependencyValue": "$new$", "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "drs_config", "value": "true", "datatype": "boolean", "componentid": "component-cluster-vcenter-1", "name": "Cluster DRS Enabled", "tooltip": null, "required": false, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": "cluster", "dependencyValue": "$new$", "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "ensure", "value": "present", "datatype": "string", "componentid": "component-cluster-vcenter-1", "name": null, "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": false, "hidefromtemplate": true, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": "none", "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }] }, { "id": "asm::cluster::vds", "name": "vSphere VDS Settings", "settings": [{ "id": "vds_name", "value": "", "datatype": "enum", "componentid": "component-cluster-vcenter-1", "name": "VDS Name", "tooltip": null, "required": false, "min": 0, "max": 0, "multiple": false, "options": [{ "id": "", "name": "Select...", "dependencyTarget": null, "dependencyValue": null }, { "id": "$new$", "name": "Create VDS Name ...", "dependencyTarget": null, "dependencyValue": null }, { "id": "VXMA_dvswitch1", "name": "VXMA_dvswitch1", "dependencyTarget": "datacenter", "dependencyValue": "VXRC-Datacenter" }, { "id": "aer1-vds0", "name": "aer1-vds0", "dependencyTarget": "datacenter", "dependencyValue": "aer1-dc-1" }, { "id": "VXMA_dvswitch2", "name": "VXMA_dvswitch2", "dependencyTarget": "datacenter", "dependencyValue": "VXRC-Datacenter" }, { "id": "aer1-vds2", "name": "aer1-vds2", "dependencyTarget": "datacenter", "dependencyValue": "aer1-dc-1" }, { "id": "VXMA_dvswitch0", "name": "VXMA_dvswitch0", "dependencyTarget": "datacenter", "dependencyValue": "VXRC-Datacenter" }, { "id": "aer1-vds1", "name": "aer1-vds1", "dependencyTarget": "datacenter", "dependencyValue": "aer1-dc-1" }], "requireatdeployment": false, "hidefromtemplate": true, "dependencyTarget": "vds_enabled", "dependencyValue": "distributed", "addAction": null, "readOnly": false, "group": "VDS", "generated": true, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "$new$vds_name", "value": null, "datatype": "string", "componentid": "component-cluster-vcenter-1", "name": "New VDS Name", "tooltip": null, "required": false, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": false, "hidefromtemplate": false, "dependencyTarget": "vds_name", "dependencyValue": "$new$", "addAction": null, "readOnly": false, "group": "VDS", "generated": true, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "vds_pg", "value": "", "datatype": "enum", "componentid": "component-cluster-vcenter-1", "name": "Port Group", "tooltip": null, "required": false, "min": 0, "max": 0, "multiple": false, "options": [{ "id": "", "name": "Select...", "dependencyTarget": null, "dependencyValue": null }, { "id": "$new$", "name": "Create Port Group ...", "dependencyTarget": null, "dependencyValue": null }, { "id": "VXMA_dvswitch0-DVUplinks-47", "name": "VXMA_dvswitch0-DVUplinks-47", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch0" }, { "id": "legacy-pxe-27", "name": "legacy-pxe-27", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "vcesys-esx-mgmt", "name": "vcesys-esx-mgmt", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch0" }, { "id": "vcesys-sio-data2", "name": "vcesys-sio-data2", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "VMXA_dvswitch1-DVUplinks-49", "name": "VMXA_dvswitch1-DVUplinks-49", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "aer1-sio-mgmt", "name": "aer1-sio-mgmt", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds0" }, { "id": "aer1-pxe", "name": "aer1-pxe", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds0" }, { "id": "legacy-pxe-25", "name": "legacy-pxe-25", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "vcesys-sio-data1", "name": "vcesys-sio-data1", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "aer1-vds0-uplink-pg", "name": "aer1-vds0-uplink-pg", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds0" }, { "id": "vcesys-customer", "name": "vcesys-customer", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch0" }, { "id": "vcesys-sio-data1-157", "name": "vcesys-sio-data1-157", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "VMXA_dvswitch2-DVUplinks-51", "name": "VMXA_dvswitch2-DVUplinks-51", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch2" }, { "id": "aer1-esx-mgmt", "name": "aer1-esx-mgmt", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds0" }, { "id": "vcesys-sio-data2-158", "name": "vcesys-sio-data2-158", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "aer1-vmotion", "name": "aer1-vmotion", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds0" }, { "id": "vcesysephemtmp", "name": "vcesysephemtmp", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch0" }, { "id": "vcesys-sio-data2-JDK", "name": "vcesys-sio-data2-JDK", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "vcesys-vmotion", "name": "vcesys-vmotion", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "legacy-pxe-18", "name": "legacy-pxe-18", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "aer1-vds1-uplink-pg", "name": "aer1-vds1-uplink-pg", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds1" }, { "id": "workload_pg_503", "name": "workload_pg_503", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch0" }, { "id": "aer1-workload", "name": "aer1-workload", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds0" }, { "id": "aer1-vds2-uplink-pg", "name": "aer1-vds2-uplink-pg", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds2" }, { "id": "vcesys-sio-data2-Arun", "name": "vcesys-sio-data2-Arun", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "aer1-data1", "name": "aer1-data1", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds1" }, { "id": "vcesys-vsan", "name": "vcesys-vsan", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }, { "id": "aer1-data2", "name": "aer1-data2", "dependencyTarget": "vds_name", "dependencyValue": "aer1-vds2" }, { "id": "vcesys-sio-mgmt", "name": "vcesys-sio-mgmt", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch0" }, { "id": "vcesys-oobmgmt", "name": "vcesys-oobmgmt", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch2" }, { "id": "vxflex-installation-244", "name": "vxflex-installation-244", "dependencyTarget": "vds_name", "dependencyValue": "VXMA_dvswitch1" }], "requireatdeployment": false, "hidefromtemplate": true, "dependencyTarget": "vds_enabled", "dependencyValue": "distributed", "addAction": null, "readOnly": false, "group": "VDS", "generated": true, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "$new$vds_pg", "value": null, "datatype": "string", "componentid": "component-cluster-vcenter-1", "name": "New Port Group", "tooltip": null, "required": false, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": false, "hidefromtemplate": false, "dependencyTarget": "vds_pg", "dependencyValue": "$new$", "addAction": null, "readOnly": false, "group": "VDS", "generated": true, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "ensure", "value": "present", "datatype": "string", "componentid": "component-cluster-vcenter-1", "name": null, "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": false, "hidefromtemplate": true, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": "none", "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }] }], "referenceid": null, "referenceip": null, "referenceipurl": "https://null", "showNetworkInfo": null, "network": null, "newComponent": null, "cloned": false, "continueClicked": null, "AsmGUID": "vcenter-100.68.97.72", "puppetCertName": "vcenter-aer1-cvcsa65.asm.delllabs.net", "clonedFromId": null, "allowClone": false, "isComponentValid": true, "raid": null, "configfilename": null, "instances": 1, "errorObj": null }, { "id": "7cd66d19-b96d-4794-97ef-15d7fa9dc03e", "name": "aer1-vxflexos-gw-2", "type": "scaleio", "subtype": "HYPERCONVERGED", "componentid": "component-scaleio-gateway-1", "identifier": null, "helptext": null, "relatedcomponents": [{ "id": "4fdfeed4-9ebe-46db-b85d-61bdf8389c6e", "name": "aer1-cvcsa65.asm.delllabs.net", "installOrder": null, "subtype": null }], "categories": [{ "id": "asm::scaleio", "name": "VxFlex OS Settings", "settings": [{ "id": "asm_guid", "value": "scaleio-100.68.97.252", "datatype": "enum", "componentid": "component-scaleio-gateway-1", "name": "Target VxFlex OS Gateway", "tooltip": "Dell EMC VxFlex OS is based on ScaleIO software. VxFlex OS values may be entered/shown in this field.", "required": true, "min": 0, "max": 0, "multiple": false, "options": [{ "id": "", "name": "Select...", "dependencyTarget": null, "dependencyValue": null }, { "id": "scaleio-100.68.97.252", "name": "aer1-vxflexos-gw-2", "dependencyTarget": null, "dependencyValue": null }], "requireatdeployment": false, "hidefromtemplate": false, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "protection_domain_type", "value": "auto_generate", "datatype": "enum", "componentid": "component-scaleio-gateway-1", "name": "Protection Domain Name", "tooltip": "This selection determines how the name will be specified for your VxFlex OS protection domain.<br/><br/>Select an existing protection domain - Names for protection domains from your selected Target VxFlex OS gateway will be displayed, if available.<br/>Auto generate protection domain name and use variables that will produce a unique protection domain name.<br/>Possible variables include:<br/>${num} An auto-generated unique number</br>${esxiClusterName} - Name specified for the ESXi cluster<br/><br/>Specify a new protection domain name now User enters desired VxFlex OS protection domain name.", "required": true, "min": 0, "max": 0, "multiple": false, "options": [{ "id": "auto_generate", "name": "Auto generate protection domain name (Recommended)...", "dependencyTarget": null, "dependencyValue": null }, { "id": "specify", "name": "Specify a new protection domain name now...", "dependencyTarget": null, "dependencyValue": null }, { "id": "aer1-pd-1", "name": "aer1-pd-1", "dependencyTarget": "asm_guid", "dependencyValue": "scaleio-100.68.97.252" }], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": false, "isPreservedForDeployment": false }, { "id": "protection_domain_name_template", "value": "${esxiClusterName}-PD-${num}", "datatype": "string", "componentid": "component-scaleio-gateway-1", "name": "Protection Domain Name Template", "tooltip": "Use the protection domain name template field to to auto generate the protection domain name.<br/><br/>Possible variables include:<br/>${num} – An auto-generated unique number<br/>${esxiClusterName} – Name specified for the ESXi cluster<br/><br/>Use of the ${num} variable is required to ensure uniqueness.", "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": "protection_domain_type", "dependencyValue": "auto_generate", "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "protection_domain_new_name", "value": null, "datatype": "string", "componentid": "component-scaleio-gateway-1", "name": "New Protection Domain Name", "tooltip": "User enters desired VxFlex OS protection domain name. ", "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": "protection_domain_type", "dependencyValue": "specify", "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "storage_pool_name", "value": "pool_auto_generate", "datatype": "enum", "componentid": "component-scaleio-gateway-1", "name": "Storage Pool Name", "tooltip": "This selection determines how the name will be specified for your VxFlex OS storage pool.<br/><br/>Select an existing storage pool - Names for storage pools from your selected protection domain will be displayed, if available.<br/>Auto generate storage pool name use variables that will produce a unique storage pool name.<br/>Possible variables include:<br/>${num} An auto-generated unique number</br>${esxiClusterName} - Name specified for the ESXi cluster<br/>${protectionDomainName} - Name specified for the Protection Domain Name<br/>${diskType} - Type of disks used in the Storage Pool (SSD or HDD)<br/><br/>Specify a new storage pool name now User enters desired VxFlex OS storage pool name.", "required": true, "min": 0, "max": 0, "multiple": false, "options": [{ "id": "pool_auto_generate", "name": "Auto generate storage pool name (Recommended)...", "dependencyTarget": null, "dependencyValue": null }, { "id": "aer1-pool-SSD-1", "name": "aer1-pool-SSD-1", "dependencyTarget": "protection_domain_type", "dependencyValue": "aer1-pd-1" }, { "id": "aer1-pool-HDD-1", "name": "aer1-pool-HDD-1", "dependencyTarget": "protection_domain_type", "dependencyValue": "aer1-pd-1" }], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": false, "isPreservedForDeployment": false }, { "id": "storage_pool_name_template", "value": "${esxiClusterName}-SP-${diskType}-${num}", "datatype": "string", "componentid": "component-scaleio-gateway-1", "name": "Storage Pool Name Template", "tooltip": "Use the storage pool name template field to auto-generate the names that will be used for your storage pools. Storage pools are dynamically created based on the quantity and type of drives in your nodes.<br/><br/>Allowed variables are:<br/>${num} – An auto-generated unique number<br/>${esxiClusterName} – Name specified for the ESXi cluster<br/>${protectionDomainName} – Name specified for VxFlex OS Protection Domain<br/>${diskType} – Type of disk used for storage pool (SSD or HDD)<br/><br/>Use of the ${num} variable is required to ensure uniqueness.", "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": true, "hidefromtemplate": false, "dependencyTarget": "storage_pool_name", "dependencyValue": "pool_auto_generate", "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "generated_protection_domain_settings", "value": "[]", "datatype": "protectiondomainsettings", "componentid": "component-scaleio-gateway-1", "name": "Generated Protection Domain Settings", "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": false, "hidefromtemplate": true, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": true, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": true }, { "id": "virtual_network_interfaces", "value": "", "datatype": "list", "componentid": "component-scaleio-gateway-1", "name": "VxFlex OS MDM Virtual IP Networks", "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": true, "options": [], "requireatdeployment": false, "hidefromtemplate": true, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }, { "id": "storage_pool_spare_capacity", "value": null, "datatype": "radio", "componentid": "component-scaleio-gateway-1", "name": "VxFlex OS Storage Pool Spare Capacity", "tooltip": "VxRack FLEX recommends a spare capacity of 1/N, where N is the number of nodes in the storage pool.<br/><br/>When adding aditional nodes to a storage pool, the recommendation is to have VxFlex Manager update the spare capacity based on the updated total number nodes.<br/><br/>If appropriate, the spare capacity can remain at the current value by selecting “Current Spare Capacity” option.", "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": false, "hidefromtemplate": true, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": null, "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": true }, { "id": "ensure", "value": "present", "datatype": "string", "componentid": "component-scaleio-gateway-1", "name": null, "tooltip": null, "required": true, "min": 0, "max": 0, "multiple": false, "options": [], "requireatdeployment": false, "hidefromtemplate": true, "dependencyTarget": null, "dependencyValue": null, "addAction": null, "readOnly": false, "group": "none", "generated": false, "useinfotooltip": false, "maxlength": 256, "step": 1, "isOptionsSortable": true, "isPreservedForDeployment": false }] }], "referenceid": null, "referenceip": null, "referenceipurl": "https://null", "showNetworkInfo": null, "network": null, "newComponent": null, "cloned": false, "continueClicked": null, "AsmGUID": "scaleio-100.68.97.252", "puppetCertName": "scaleio-aer1-vxflexos-gw-2", "clonedFromId": null, "allowClone": false, "isComponentValid": true, "raid": null, "configfilename": null, "instances": 1, "errorObj": null }], "expires": null, "servers": 0, "ram": 0, "processors": 0, "arrays": 0, "volumes": 0, "vlans": 0, "networktype": null, "vms": 0, "clusters": 0, "type": null, "state": "Pending", "createddate": null, "createdBy": null, "priority": null, "compute": 0, "storage": 0, "network": 0, "serverlist": [{ "id": "ff80808166e5fd260166e6080d5d0bd9", "health": "green", "healthmessage": "This component is in use by another VxFM service", "ipAddress": "100.68.97.18", "serviceTag": "3FXVJB2", "deviceType": "RackServer", "compliant": "unknown", "state": "unmanaged", "model": null, "displayserverpools": null, "manufacturer": null, "processorcount": -1, "processor": null, "memory": "N/A", "ipaddressurl": "https://100.68.97.18", "deviceid": "3FXVJB2", "hostname": null, "chassisname": null, "groupname": null, "dnsdracname": null, "storagecentername": null, "replayprofile": null, "newserverpool": "Hybrid Servers", "availability": null, "status": "complete", "nics": 0, "servicelist": [], "name": null, "resourcename": null, "partitions": null, "profile": null, "statusText": null, "firmwareName": null, "template": null, "lastInventory": null, "lastComplianceCheck": null, "discoveredOn": null, "blades": 0, "canpoweron": false, "canpoweroff": false, "candelete": true, "os": null, "storage": null, "ipaddresses": null, "ipaddresstype": "management", "powerstate": null, "location": null, "systemstatus": null, "groupmembers": null, "volumes": null, "volumesup": null, "deviceidtype": "servicetag", "snapshots": null, "freegroupspace": null, "serialnumber": null, "datacenters": null, "networks": [], "clusters": null, "hosts": null, "virtualmachines": null, "dnsname": null, "cpu": null, "freediskspace": null, "online": null, "luns": null, "hostgroups": null, "volumelist": [], "serverpool": "Hybrid Servers", "hypervisorIPAddress": null, "aggregates": null, "disks": null, "vm_hostname": "", "vm_ostype": "", "vm_cpus": "", "vm_disksize": "", "vm_memory": "", "ipaddresslist": [], "firmwarecomponents": [], "showcompliancereport": false, "spaipaddress": null, "spaipaddressurl": null, "spbipaddress": null, "spbipaddressurl": null, "datacentername": null, "clustername": null, "asmGUID": "ff80808166e5fd260166e6080d5d0bd9", "deviceDetails": null, "protectionDomain": null, "storagePools": [], "osMode": null, "mdmRole": null, "vxflexosmanagementipaddress": null, "primarymdmipaddress": null }, { "id": "ff80808166e5fd260166e60b981c0fe5", "health": "green", "healthmessage": "This component is in use by another VxFM service", "ipAddress": "100.68.97.14", "serviceTag": "3FXZJB2", "deviceType": "RackServer", "compliant": "unknown", "state": "unmanaged", "model": null, "displayserverpools": null, "manufacturer": null, "processorcount": -1, "processor": null, "memory": "N/A", "ipaddressurl": "https://100.68.97.14", "deviceid": "3FXZJB2", "hostname": null, "chassisname": null, "groupname": null, "dnsdracname": null, "storagecentername": null, "replayprofile": null, "newserverpool": "Hybrid Servers", "availability": null, "status": "complete", "nics": 0, "servicelist": [], "name": null, "resourcename": null, "partitions": null, "profile": null, "statusText": null, "firmwareName": null, "template": null, "lastInventory": null, "lastComplianceCheck": null, "discoveredOn": null, "blades": 0, "canpoweron": false, "canpoweroff": false, "candelete": true, "os": null, "storage": null, "ipaddresses": null, "ipaddresstype": "management", "powerstate": null, "location": null, "systemstatus": null, "groupmembers": null, "volumes": null, "volumesup": null, "deviceidtype": "servicetag", "snapshots": null, "freegroupspace": null, "serialnumber": null, "datacenters": null, "networks": [], "clusters": null, "hosts": null, "virtualmachines": null, "dnsname": null, "cpu": null, "freediskspace": null, "online": null, "luns": null, "hostgroups": null, "volumelist": [], "serverpool": "Hybrid Servers", "hypervisorIPAddress": null, "aggregates": null, "disks": null, "vm_hostname": "", "vm_ostype": "", "vm_cpus": "", "vm_disksize": "", "vm_memory": "", "ipaddresslist": [], "firmwarecomponents": [], "showcompliancereport": false, "spaipaddress": null, "spaipaddressurl": null, "spbipaddress": null, "spbipaddressurl": null, "datacentername": null, "clustername": null, "asmGUID": "ff80808166e5fd260166e60b981c0fe5", "deviceDetails": null, "protectionDomain": null, "storagePools": [], "osMode": null, "mdmRole": null, "vxflexosmanagementipaddress": null, "primarymdmipaddress": null }, { "id": "ff80808166e5fd260166e60aa2a40e4a", "health": "green", "healthmessage": "This component is in use by another VxFM service", "ipAddress": "100.68.97.19", "serviceTag": "3FXTJB2", "deviceType": "RackServer", "compliant": "unknown", "state": "unmanaged", "model": null, "displayserverpools": null, "manufacturer": null, "processorcount": -1, "processor": null, "memory": "N/A", "ipaddressurl": "https://100.68.97.19", "deviceid": "3FXTJB2", "hostname": null, "chassisname": null, "groupname": null, "dnsdracname": null, "storagecentername": null, "replayprofile": null, "newserverpool": "Hybrid Servers", "availability": null, "status": "complete", "nics": 0, "servicelist": [], "name": null, "resourcename": null, "partitions": null, "profile": null, "statusText": null, "firmwareName": null, "template": null, "lastInventory": null, "lastComplianceCheck": null, "discoveredOn": null, "blades": 0, "canpoweron": false, "canpoweroff": false, "candelete": true, "os": null, "storage": null, "ipaddresses": null, "ipaddresstype": "management", "powerstate": null, "location": null, "systemstatus": null, "groupmembers": null, "volumes": null, "volumesup": null, "deviceidtype": "servicetag", "snapshots": null, "freegroupspace": null, "serialnumber": null, "datacenters": null, "networks": [], "clusters": null, "hosts": null, "virtualmachines": null, "dnsname": null, "cpu": null, "freediskspace": null, "online": null, "luns": null, "hostgroups": null, "volumelist": [], "serverpool": "Hybrid Servers", "hypervisorIPAddress": null, "aggregates": null, "disks": null, "vm_hostname": "", "vm_ostype": "", "vm_cpus": "", "vm_disksize": "", "vm_memory": "", "ipaddresslist": [], "firmwarecomponents": [], "showcompliancereport": false, "spaipaddress": null, "spaipaddressurl": null, "spbipaddress": null, "spbipaddressurl": null, "datacentername": null, "clustername": null, "asmGUID": "ff80808166e5fd260166e60aa2a40e4a", "deviceDetails": null, "protectionDomain": null, "storagePools": [], "osMode": null, "mdmRole": null, "vxflexosmanagementipaddress": null, "primarymdmipaddress": null }], "storagelist": [], "networklist": [], "clusterlist": [{ "id": "4fdfeed4-9ebe-46db-b85d-61bdf8389c6e", "health": "unknown", "healthmessage": "", "ipAddress": "100.68.97.72", "serviceTag": "aer1-cvcsa65.asm.delllabs.net", "deviceType": "vcenter", "compliant": "unknown", "state": "managed", "model": null, "displayserverpools": null, "manufacturer": null, "processorcount": -1, "processor": null, "memory": "N/A", "ipaddressurl": "https://100.68.97.72", "deviceid": "aer1-cvcsa65.asm.delllabs.net", "hostname": null, "chassisname": null, "groupname": null, "dnsdracname": null, "storagecentername": null, "replayprofile": null, "newserverpool": null, "availability": null, "status": "complete", "nics": 0, "servicelist": [], "name": null, "resourcename": null, "partitions": null, "profile": null, "statusText": null, "firmwareName": null, "template": null, "lastInventory": null, "lastComplianceCheck": null, "discoveredOn": null, "blades": 0, "canpoweron": false, "canpoweroff": false, "candelete": true, "os": null, "storage": null, "ipaddresses": null, "ipaddresstype": "management", "powerstate": null, "location": null, "systemstatus": null, "groupmembers": null, "volumes": null, "volumesup": null, "deviceidtype": "servicetag", "snapshots": null, "freegroupspace": null, "serialnumber": null, "datacenters": null, "networks": [], "clusters": null, "hosts": null, "virtualmachines": null, "dnsname": null, "cpu": null, "freediskspace": null, "online": null, "luns": null, "hostgroups": null, "volumelist": [], "serverpool": null, "hypervisorIPAddress": null, "aggregates": null, "disks": null, "vm_hostname": "", "vm_ostype": "", "vm_cpus": "", "vm_disksize": "", "vm_memory": "", "ipaddresslist": [], "firmwarecomponents": [], "showcompliancereport": false, "spaipaddress": null, "spaipaddressurl": null, "spbipaddress": null, "spbipaddressurl": null, "datacentername": "aer1-dc-1", "clustername": "aer1-cluster-1", "asmGUID": "vcenter-100.68.97.72", "deviceDetails": null, "protectionDomain": null, "storagePools": [], "osMode": null, "mdmRole": null, "vxflexosmanagementipaddress": null, "primarymdmipaddress": null }], "applicationlist": [], "vmlist": [], "activityLogs": [], "profile": null, "componentstatus": [{ "componentid": "4fdfeed4-9ebe-46db-b85d-61bdf8389c6e", "deviceid": "4fdfeed4-9ebe-46db-b85d-61bdf8389c6e", "devicetype": "cluster", "status": "complete", "statustime": null, "statusmessage": null, "resourcestate": "complete" }, { "componentid": "7cd66d19-b96d-4794-97ef-15d7fa9dc03e", "deviceid": "7cd66d19-b96d-4794-97ef-15d7fa9dc03e", "devicetype": "scaleio", "status": "complete", "statustime": null, "statusmessage": null, "resourcestate": "complete" }], "canMigrate": false, "canScaleupStorage": true, "canScaleupServer": true, "canScaleupVM": false, "canScaleupCluster": false, "canScaleupApplication": false, "forceRetry": false, "allStandardUsers": false, "assignedUsers": [], "owner": null, "canEdit": true, "canDelete": true, "canCancel": true, "canRetry": true, "canDeleteResources": true, "manageFirmware": true, "firmwarePackageId": null, "updateServerFirmware": false, "updateNetworkFirmware": false, "updateStorageFirmware": false, "componentUpdateRequired": false, "canScaleupNetwork": true, "templateId": "b4029167-f143-4314-918a-45a7547cc3f7", "resourceHealth": "green", "isHyperV": false, "hasVDS": false, "cancelInprogress": false, "scaleiolist": [{ "id": "7cd66d19-b96d-4794-97ef-15d7fa9dc03e", "health": "unknown", "healthmessage": "", "ipAddress": "100.68.97.252", "serviceTag": "aer1-vxflexos-gw-2", "deviceType": "scaleio", "compliant": "unknown", "state": "managed", "model": null, "displayserverpools": null, "manufacturer": null, "processorcount": -1, "processor": null, "memory": "N/A", "ipaddressurl": "https://100.68.97.252", "deviceid": "aer1-vxflexos-gw-2", "hostname": "aer1-vxflexos-gw-2", "chassisname": null, "groupname": null, "dnsdracname": null, "storagecentername": null, "replayprofile": null, "newserverpool": null, "availability": null, "status": "complete", "nics": 0, "servicelist": [], "name": null, "resourcename": null, "partitions": null, "profile": null, "statusText": null, "firmwareName": null, "template": null, "lastInventory": null, "lastComplianceCheck": null, "discoveredOn": null, "blades": 0, "canpoweron": false, "canpoweroff": false, "candelete": true, "os": null, "storage": null, "ipaddresses": null, "ipaddresstype": "management", "powerstate": null, "location": null, "systemstatus": null, "groupmembers": null, "volumes": null, "volumesup": null, "deviceidtype": "servicetag", "snapshots": null, "freegroupspace": null, "serialnumber": null, "datacenters": null, "networks": [], "clusters": null, "hosts": null, "virtualmachines": null, "dnsname": null, "cpu": null, "freediskspace": null, "online": null, "luns": null, "hostgroups": null, "volumelist": [], "serverpool": null, "hypervisorIPAddress": null, "aggregates": null, "disks": null, "vm_hostname": "", "vm_ostype": "", "vm_cpus": "", "vm_disksize": "", "vm_memory": "", "ipaddresslist": [], "firmwarecomponents": [], "showcompliancereport": false, "spaipaddress": null, "spaipaddressurl": null, "spbipaddress": null, "spbipaddressurl": null, "datacentername": null, "clustername": null, "asmGUID": "scaleio-100.68.97.252", "deviceDetails": null, "protectionDomain": null, "storagePools": [], "osMode": null, "mdmRole": null, "vxflexosmanagementipaddress": null, "primarymdmipaddress": "100.68.97.200" }], "enableServiceMode": false, "canUpdateInventory": true };
                //self.serviceCopy = angular.copy(self.service);
                self.inventoryUpdateDisabled = false;
                angular.extend(self.service, {
                    available: {
                        clusters: _.filter(self.service.clusterlist, function (cluster) { return self.availableInventory(cluster.state); })
                            .length,
                        servers: _.filter(self.service.serverlist, function (server) { return self.availableInventory(server.state); })
                            .length,
                        storages: _.filter(self.service.storagelist, function (storage) { return self.availableInventory(storage.state); })
                            .length,
                        scaleios: _.filter(self.service.scaleiolist, function (scaleio) { return self.availableInventory(scaleio.state); })
                            .length
                    },
                    newThings: {
                        clusters: self.getNewComponents(self.service.clusterlist).length,
                        servers: self.getNewComponents(self.service.serverlist).length,
                        storages: self.getNewComponents(self.service.storagelist).length,
                        scaleios: self.getNewComponents(self.service.scaleiolist).length
                    }
                });
            })
                .catch(function (data) {
                self.inventoryUpdateDisabled = true;
                self.GlobalServices.DisplayError(data.data, self.errors);
            })
                .finally(function () {
                d.resolve();
            });
        };
        UpdateInventoryModalController.prototype.isNew = function (component) {
            var self = this;
            var matchingComponent = _.find(self.service.components, { id: component.id });
            return matchingComponent ? _.startsWith(matchingComponent.name, '*') : null;
        };
        UpdateInventoryModalController.prototype.getNewComponents = function (componentsArray) {
            var self = this;
            return _.filter(componentsArray, function (component) { return self.isNew(component); });
        };
        UpdateInventoryModalController.prototype.isAnythingNew = function () {
            var self = this;
            return self.service && _.find(self.service.components, function (component) { return self.isNew(component); });
        };
        UpdateInventoryModalController.prototype.validateOsCredentials = function () {
            var self = this;
            var d = self.$q.defer();
            self.forms.osCredentials._submitted = true;
            self.forms.osCredentials.$invalid ? d.reject() : d.resolve();
            return d.promise;
        };
        UpdateInventoryModalController.prototype.availableInventory = function (state) {
            return !(state === 'unmanaged' || state === 'updating');
        };
        UpdateInventoryModalController.prototype.finishWizard = function () {
            var self = this;
            self.Dialog(self.$translate.instant('GENERIC_Confirm'), self.$translate.instant('SERVICES_SERVICE_UpdateInventory_ConfirmUpdateInventory'))
                .then(function () {
                var d = self.$q.defer();
                self.GlobalServices.ClearErrors(self.errors);
                self.Loading(d.promise);
                //strip the * added to indicate new component before sending
                angular.forEach(self.service.components, function (comp) {
                    //comp.name = comp.name.replace('*', '');
                    if (_.startsWith(comp.name, '*')) {
                        comp.name = comp.name.substring(1);
                    }
                });
                self.updateExistingService(self.service.id, self.service.components)
                    .then(function (data) {
                    //console.log('success response:  ' + data.data.responseObj);
                    self.$scope.modal.close();
                })
                    .catch(function (data) {
                    self.GlobalServices.DisplayError(data.data, self.errors);
                })
                    .finally(function () {
                    d.resolve();
                });
            });
        };
        UpdateInventoryModalController.prototype.updateServiceInventory = function (id) {
            var self = this;
            return self.$http.post(self.Commands.data.services.updateServiceInventory, { id: id });
        };
        UpdateInventoryModalController.prototype.updateExistingService = function (id, comps) {
            var self = this;
            return self.$http.post(self.Commands.data.services.updateExistingService, { serviceId: id, osCredentials: self.osCredentials });
        };
        UpdateInventoryModalController.prototype.close = function () {
            var self = this;
            self.$scope.modal.dismiss();
        };
        UpdateInventoryModalController.prototype.cancel = function () {
            var self = this;
            self.$scope.modal.cancel();
        };
        UpdateInventoryModalController.$inject = ['Modal', '$http', '$timeout', '$scope', '$q', '$translate', 'Loading', 'Dialog', 'Commands', 'GlobalServices', "$filter", "constants"];
        return UpdateInventoryModalController;
    }());
    asm.UpdateInventoryModalController = UpdateInventoryModalController;
    angular
        .module('app')
        .controller('UpdateInventoryModalController', UpdateInventoryModalController);
})(asm || (asm = {}));
//# sourceMappingURL=updateInventoryModal.js.map
